<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>医保谈判的七年：救命药真的便宜了吗？</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: '微软雅黑', 'Microsoft YaHei', sans-serif;
            overflow-x: hidden;
        }

        /* ========== 第一页 - 封面页 ========== */
        .page-1 {
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), 
                        url('cover.jpg');
            background-size: cover;
            background-position: center;
            color: white;
            transition: transform 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .title {
            font-size: 4rem;
            font-weight: bold;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
            opacity: 0;
            transform: translateY(50px);
            animation: fadeInUp 1s ease-out 0.5s forwards;
        }

        .subtitle {
            font-size: 2rem;
            opacity: 0;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
            animation: fadeInUp2 1s ease-out 1s forwards;
            text-align: center;
            width: 100%;
        }

        .scroll-hint {
            position: absolute;
            bottom: 50px;
            width: 100%;
            color: white;
            font-size: 1.2rem;
            opacity: 0;
            animation: fadeInUp3 1s ease-out 2s forwards;
            text-align: center;
        }

        .scroll-text {
            display: block;
            margin-bottom: 10px;
        }

        .scroll-arrow {
            display: block;
            font-size: 2rem;
            animation: bounce 2s infinite 3s;
        }

        /* ========== 第二页 - 谈判现场语录 ========== */
        .page-2 {
            min-height: 200vh;
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            padding: 100px 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
            margin-top: 100vh;
        }

        .quotes-container {
            position: relative;
            width: 100%;
            min-height: 0vh;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            padding-top: 100px;
            gap: 40px;
        }

        .quote-bubble {
            background: rgba(255,255,255,0.95);
            padding: 30px 40px;
            border-radius: 25px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.3);
            max-width: 700px;
            width: 90%;
            font-size: 1.6rem;
            font-weight: bold;
            color: #000000;
            text-align: center;
            opacity: 0;
            transform: scale(0.8) translateY(30px);
            transition: all 1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            position: relative;
            margin-bottom: 20px;
        }

        .quote-bubble.show {
            opacity: 1;
            transform: scale(1) translateY(0);
        }

        .quote-bubble.price {
            color: #000000;
            font-size: 1.8rem;
        }

        .scene-description {
            margin-top: 100px;
            max-width: 800px;
            text-align: center;
            color: white;
            padding: 40px 20px;
        }

        .scene-text{
    font-size:1.5rem;
    line-height:2;
    margin-bottom:15px;
    opacity:0;                         /* 起始完全透明 */
    transform:translateY(30px);        /* 起始向下位移 30px */
    transition:all .8s ease;           /* 过渡 */
}
.scene-text.show{
    opacity:1;                         /* 淡入到完全可见 */
    transform:translateY(0);           /* 位置归零 */
}

/* 只负责配色/加粗，不要触碰 opacity / transform / transition */
.scene-text,
.scene-text.highlight_1 {                   /* ← 新类名一起写上 */
    font-size: 1.5rem;
    line-height: 2;
    margin-bottom: 15px;
    opacity: 0;                             /* 必须是 0 */
    transform: translateY(30px);
    transition: all .8s ease;
}

/* 滚动后淡入 —— 放在样式表末尾，保证权重最高 */
.scene-text.show,
.scene-text.highlight_1.show {
    opacity: 1;
    transform: translateY(0);
}

/* 仅做配色，不再碰 opacity / transform */
.scene-text.highlight_1 {
    color: #f39c12;
    font-weight: bold;
}

        /* ========== 第三页 - 国谈药定义 ========== */
        .page-3 {
    min-height: 100vh;
    background: #ecf0f1;
    /* 去掉原来的上下 padding */
    padding: 0 20px;
    /* Flex 布局：垂直＋水平都居中 */
    display: flex;
    flex-direction: column;
    justify-content: center;  /* 垂直居中 */
    align-items: center;      /* 水平居中 */
}
.page-2-5 {
  min-height: 100vh;
  background: linear-gradient(135deg, #ecf0f1 0%, #e3e7e9f8 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  overflow: hidden;
}

.page-2-5 .transition-content {
  /* 确保子元素可以被 text-align 影响 */
  text-align: center;
}

.page-2-5 .transition-title {
  display: inline-block;   /* 从 block 切换到 inline-block */
  width: auto;             /* 不要再占满 100% 宽度，改为根据文本自适应 */
  white-space: nowrap;     /* 保持不换行 */
  margin: 0 auto 40px;     /* 上 0，左右 auto（水平居中），下 40px */
  font-size: 2.8rem;
  line-height: 1.4;
  color: #000;
  font-weight: 600;
}

.page-2-5 .final-text {
  font-size: 2.8rem;
  color: #000;
  font-weight: 600;
  margin: 20px 0 30px;
}

.page-2-5 .medicine-box-container {
  position: relative;
  z-index: 2;
  margin-top: 30px;
}

.page-2-5 .medicine-box-img {
  width: 100%;
  max-width: 600px;
  height: auto;
  display: block;
  margin: 0 auto;
  border-radius: 12px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.1);
}

/* 确保粒子在图片下方 */
.page-2-5 .extra-particle {
  width: 12px !important;
  height: 12px !important;
}

/* 保留粒子动画 */
@keyframes extraParticle {
  0% {
    opacity: 1;
    transform: translateY(0) scale(0.5);
  }
  100% {
    opacity: 0;
    transform: translateY(-300px) scale(2);
  }
}

/* ================= 响应式设计 ================= */
@media (max-width: 768px) {
    .transition-title {
        font-size: 2.2rem;
    }
    
    .final-text {
        font-size: 2.2rem;
    }
    
    .keyword {
        font-size: 2.8rem;
    }
    
    .medicine-box-img {
        max-width: 320px;
        width: 90%;
    }
    
    .medicine-box-container::before {
        left: 15%;
        top: 15%;
    }
    
    .medicine-box-container::after {
        right: 20%;
        top: 25%;
    }
}

@media (max-width: 480px) {
    .transition-title {
        font-size: 1.8rem;
    }
    
    .final-text {
        font-size: 1.8rem;
    }
    
    .keyword {
        font-size: 2.4rem;
    }
}
/* 修改第三页样式 - 去掉标题的margin */
.page-3 {
    min-height: 100vh;
    background: #ecf0f1;
    padding: 80px 20px; /* 减少上边距 */
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}

/* 响应式调整 */
@media (max-width: 768px) {
    .transition-title {
        font-size: 2.5rem;
    }
    
    .text-key {
        font-size: 3rem;
    }
    
    .concept-illustration {
        max-width: 350px;
    }
}
        .page-3 .section-title {
            font-size: 3.2rem;
            color: #000000;
            margin-bottom: 50px;
            text-align: center;
            line-height: 1.6;
            opacity: 0;
            transform: translateY(30px);
        }

        .definition-content h3 {
            font-size: 2.8rem;
            color: #000000;
            margin-bottom: 20px;
        }

        .definition-content p {
            font-size: 1.8rem;
            line-height: 1.8;
            color: #555;
            margin-bottom: 15px;
        }

        .page-3 .definition-card {
    background: white;
    border-radius: 20px;
    padding: 60px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    max-width: 1000px;
    /* 垂直初始位置保留动画用 translateY(30px) */
    opacity: 0;
    transform: translateY(30px);

    /* 保证水平自动居中（对于非 flex 场景也生效） */
    margin: 0 auto;
    width: 100%;
}

        .highlight-text {
            color: #f39c12;
            font-weight: bold;
            margin: 15px 0;
            display: block;
            background: none;
        }

        .highlight {
            color: #f39c12;
            font-weight: bold;
            background: none;
        }

        /* ========== 第四页 - 逐个展示药品 ========== */
        .page-4 {
            min-height: 300vh;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 100px 20px;
            position: relative;
            overflow: hidden;
        }

        .page-4 .section-title {
            position: fixed;
            top: 10%;
            left: 0;
            right: 0;
            margin: 0 auto 60px;
            text-align: center;

            font-size: 3.2rem;
            color: #000000;
            opacity: 0;
            transition: opacity 0.8s ease;
            white-space: nowrap;
            z-index: 100;
        }

        .page-4 .section-title.show {
            opacity: 1;
        }


        /* 第四页的固定容器 - 重要：添加条件显示 */
        .page-4 .sticky-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 50;
            pointer-events: none; /* 默认不接收鼠标事件 */
        }

        /* 只有在第四页范围内才显示并接收事件 */
        .page-4 .sticky-container.in-view {
            pointer-events: auto;
        }

        .drug-card {
            position: absolute;
            display: flex;
            align-items: center;
            gap: 60px;
            max-width: 1200px;
            width: 90%;
            opacity: 0;
            transform: translateY(100px);
            transition: all 1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .drug-card.active {
            opacity: 1;
            transform: translateY(0);
        }

        .drug-card.exit-up {
            opacity: 0;
            transform: translateY(-100px);
        }

        .drug-avatar {
            background: white;
            padding: 30px;
            border-radius: 50%;
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
            min-width: 350px;
            min-height: 350px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .drug-avatar img {
            width: 320px;
            height: 320px;
            object-fit: contain;
            border-radius: 50%;
            pointer-events: none; /* 图片不接收鼠标事件 */
        }

        .drug-content {
            background: rgba(255,255,255,0.95);
            padding: 50px 60px;
            border-radius: 25px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            flex: 1;
            position: relative;
        }

        .drug-content::before {
            content: '';
            position: absolute;
            top: 50%;
            left: -15px;
            transform: translateY(-50%);
            width: 0;
            height: 0;
            border-top: 15px solid transparent;
            border-bottom: 15px solid transparent;
            border-right: 15px solid rgba(255,255,255,0.95);
        }

        .drug-content p {
            margin-bottom: 20px;
            line-height: 1.8;
            color: #000000;
            font-size: 1.4rem;
        }

        .drug-content .highlight {
            background: linear-gradient(120deg, #e74c3c, #c0392b);
            color: white;
            padding: 3px 8px;
            border-radius: 5px;
            font-weight: bold;
        }

        /* ========== 第五页 - 流程图 ========== */
        .page-5 {
            min-height: 100vh;
            background: linear-gradient(135deg, #ecf0f1 0%, #ecf0f1 100%);
            padding: 100px 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative; /* 重要：确保创建新的层叠上下文 */
            z-index: 10; /* 确保第五页在第四页之上 */
        }
        /* 第5页新增样式 */
        .page-5 .white-text {
        color: rgb(0, 0, 0);
        }

        .page-5 .page5-title {
        color:  #000000;;        /* 标题可以用红色或你想要的色 */
        font-size: 3.2rem;
        font-weight: 700;
        text-align: center;
        margin: 40px 0;
        line-height: 1.4;
        }

        /* 引导文字样式 */
        .page-5 .intro-text {
            color: #000000;
            font-size: 2.0rem;
            line-height: 2;
            margin-bottom: 30px;
            text-align: center;
            max-width: 800px;
        }

        .page-5 .intro-highlight {
            color: #3498db;
            font-weight: bold;
        }

        .page-5 .intro-question {
            color: #e74c3c;
            font-size: 1.6rem;
            font-weight: bold;
            margin: 40px 0;
            text-align: center;
        }

        /* 流程图容器 */
        .page-5 .roadmap-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 30px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
            padding: 50px;
            max-width: 1200px;
            width: 100%;
            position: relative;
            z-index: 1; /* 基础层级 */
        }

        .page-5 .header {
            text-align: center;
            margin-bottom: 60px;
            position: relative;
            z-index: 2;
        }

        .page-5 .main-title {
            font-size: 52px;
            font-weight: 900;
            background: linear-gradient(135deg, #000000, #000000, #000000);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: 3px;
            margin-bottom: 15px;
        }

        /* 路径容器 - 关键修改 */
        .page-5 .roadmap-path {
            position: relative;
            width: 100%;
            height: 600px;
            margin-bottom: 40px;
            pointer-events: none; /* 整个容器不接收事件 */
        }

        /* SVG路径 - 确保不阻挡点击 */
        .page-5 .path-svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0; /* 最底层 */
            pointer-events: none; /* 不接收任何鼠标事件 */
        }

        /* 所有SVG内的元素都不接收事件 */
        .page-5 .path-svg * {
            pointer-events: none !important;
        }

        /* 步骤节点 - 最关键的部分 */
        .page-5 .step-node {
            position: absolute;
            z-index: 100; /* 高层级确保可点击 */
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            pointer-events: auto !important; /* 强制可点击 */
        }

        .page-5 .step-node:hover {
            transform: scale(1.1);
            z-index: 110; /* hover时更高层级 */
        }

        .page-5 .node-circle {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, #FF8C00, #FFA500);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 25px rgba(255, 140, 0, 0.4);
            position: relative;
            animation: nodeAppear 0.6s ease-out forwards;
            opacity: 0;
            transform: scale(0);
            pointer-events: auto !important; /* 确保圆圈可点击 */
        }

        .page-5 .node-number {
            font-size: 24px;
            font-weight: 900;
            color: white;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
            z-index: 2;
            position: relative;
            pointer-events: none; /* 数字不接收事件，让事件传递到父元素 */
        }

        .page-5 .step-label {
            background: rgba(44, 82, 130, 0.95);
            color: white;
            padding: 16px 28px;
            border-radius: 22px;
            font-size: 20px;
            font-weight: 600;
            margin-top: 25px;
            box-shadow: 0 5px 15px rgba(44, 82, 130, 0.3);
            text-align: center;
            min-width: 140px;
            pointer-events: none; /* 标签不接收事件 */
        }

        /* 节点位置 */
        .page-5 .step-1 { top: 80px; left: 80px; }
        .page-5 .step-2 { top: 280px; left: 280px; }
        .page-5 .step-3 { top: 120px; left: 520px; }
        .page-5 .step-4 { top: 320px; left: 760px; }
        .page-5 .step-5 { top: 80px; left: 1000px; }

        /* 详情面板 */
        .page-5 .details-panel {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 25px;
            padding: 30px;
            margin-top: 30px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(20px);
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease;
            max-height: 0;
            overflow: hidden;
        }

        .page-5 .details-panel.active {
            opacity: 1;
            transform: translateY(0);
            max-height: 300px;
        }

        /* 确保所有可能遮挡的元素都不影响点击 */
        .page-5 img,
        .page-5 svg,
        .page-5 path,
        .page-5 .path-line,
        .page-5 .path-shadow,
        .page-5 .path-highlight {
            pointer-events: none !important;
        }

        /* 通用动画和效果 */
        .fade-in-element {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s ease;
        }

        .fade-in-element.show {
            opacity: 1;
            transform: translateY(0);
        }

        /* 动画定义 */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeInUp2 {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeInUp3 {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        @keyframes drawPath {
            to { stroke-dashoffset: 0; }
        }

        @keyframes flowDirection {
            0% { stroke-dashoffset: 30; }
            100% { stroke-dashoffset: 0; }
        }

        @keyframes nodeAppear {
            to { opacity: 1; transform: scale(1); }
        }

        @keyframes ripple {
            0% { transform: scale(1.2); opacity: 0.6; }
            100% { transform: scale(1.8); opacity: 0; }
        }

        /* 节点动画延迟 */
        .page-5 .step-1 .node-circle { animation-delay: 0.8s; }
        .page-5 .step-2 .node-circle { animation-delay: 1.6s; }
        .page-5 .step-3 .node-circle { animation-delay: 2.4s; }
        .page-5 .step-4 .node-circle { animation-delay: 3.2s; }
        .page-5 .step-5 .node-circle { animation-delay: 4.0s; }

        /* 节点波纹效果 */
        .page-5 .node-circle::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: linear-gradient(135deg, #FF8C00, #FFA500);
            opacity: 0.6;
            transform: scale(1.2);
            animation: ripple 2s infinite;
            pointer-events: none; /* 波纹不接收事件 */
        }

        /* SVG路径样式 */
        .page-5 .path-line {
            fill: none;
            stroke: url(#pathGradient);
            stroke-width: 25;
            stroke-linecap: round;
            stroke-linejoin: round;
            filter: drop-shadow(0 8px 20px rgba(74, 144, 226, 0.4));
            stroke-dasharray: 3000;
            stroke-dashoffset: 3000;
            animation: drawPath 4s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        }

        .page-5 .path-shadow {
            fill: none;
            stroke: rgba(74, 144, 226, 0.15);
            stroke-width: 35;
            stroke-linecap: round;
            stroke-linejoin: round;
            filter: blur(15px);
        }

        .page-5 .path-highlight {
            fill: none;
            stroke: url(#pathHighlight);
            stroke-width: 8;
            stroke-linecap: round;
            stroke-linejoin: round;
            opacity: 0.8;
            stroke-dasharray: 20 10;
            animation: flowDirection 3s linear infinite;
        }

        /* 详情面板样式 */
        .page-5 .details-title {
            font-size: 28px;
            font-weight: 800;
            color: #2C5282;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }

        .page-5 .details-time {
            background: linear-gradient(135deg, #FF8C00, #FFA500);
            color: white;
            padding: 8px 16px;
            border-radius: 15px;
            font-size: 16px;
            font-weight: 700;
            margin-left: 15px;
        }

        .page-5 .details-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .page-5 .detail-item {
            background: rgba(74, 144, 226, 0.1);
            padding: 15px;
            border-radius: 12px;
            border-left: 4px solid #4A90E2;
            transition: all 0.3s ease;
        }

        .page-5 .detail-item:hover {
            transform: translateX(5px);
            background: rgba(74, 144, 226, 0.15);
        }

        .page-5 .detail-item h4 {
            color: #2C5282;
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 8px;
        }
        .page-5 .details-panel {
        pointer-events: auto;
        z-index: 200;
        }

        .page-5 .step-label {
        pointer-events: auto;
        }

        .page-5 .detail-item p {
            color: #4A5568;
            font-size: 14px;
            line-height: 1.5;
        }
        .page-5 .roadmap-container {
  position: relative; /* 确保定位参照 */
}

.page-5 .roadmap-container .click-tip {
  position: absolute;
  left: 50%;                    /* 水平居中 */
  bottom: 30px;                 /* 距底部稍微往上 */
  transform: translateX(-50%);  /* 通过偏移实现精确居中 */
  
  background: rgba(44, 82, 130, 0.95);
  color: #fff;
  
  font-size: 1.4rem;            /* 放大字体 */
  padding: 12px 20px;           /* 增大内边距 */
  border-radius: 6px;
  
  cursor: pointer;
  opacity: 0.8;
  transition: opacity 0.3s ease, transform 0.3s ease;
  user-select: none;
  white-space: nowrap;
}

.page-5 .roadmap-container .click-tip:hover {
  opacity: 1;
  transform: translateX(-50%) translateY(-2px);
}

        /* 响应式设计 */
        @media (max-width: 768px) {
    .title { font-size: 2.5rem; }
    .subtitle { font-size: 1.3rem; }
    
    .page-5 .roadmap-container { padding: 30px 20px; }
    .page-5 .main-title { font-size: 36px; }
    .page-5 .roadmap-path { height: 800px; }
    
    /* 移动端节点位置调整 */
    .page-5 .step-1 { top: 80px; left: 50px; }
    .page-5 .step-2 { top: 200px; left: 50px; }
    .page-5 .step-3 { top: 320px; left: 50px; }
    .page-5 .step-4 { top: 440px; left: 50px; }
    .page-5 .step-5 { top: 560px; left: 50px; }
    
    /* 移动端隐藏SVG路径 */
    .page-5 .roadmap-path svg { display: none; }
    
    /* 移动端显示垂直线 */
    .page-5 .roadmap-path::before {
        content: '';
        position: absolute;
        left: 90px;
        top: 120px;
        bottom: 200px;
        width: 4px;
        background: linear-gradient(180deg, #4A90E2, #67B7DC, #89CDF1, #67B7DC, #2C5282);
        border-radius: 2px;
    }
}

/* ================= 第六页样式 - 修复后放在正确位置 ================= */
    .page-6 {
        min-height: 100vh;
        padding: 80px 20px;
        background: #f8f9fa;
        box-sizing: border-box;
    }

    /* 文本区 */
    .page-6 .text-section {
        max-width: 800px;
        margin: 0 auto 40px;
        line-height: 1.8;
        color: #333;
        font-size: 1.8rem;
    }

    /* 大标题（第一行） */
    .page-6 .text-section > h2 {
        font-size: 2.6rem;
        font-weight: 600;
        margin-bottom: 16px;
        color: hwb(0 0% 100%);
        text-align: center;
    }

    /* 副标题（如果有的话） */
    .page-6 .text-section > h3 {
        font-size: 1.8rem;
        font-weight: 500;
        margin: 24px 0 16px;
        color: #000000;
        text-align: center;
    }

    /* 正文段落 */
    .page-6 .text-section > p {
        margin-bottom: 16px;
        text-align: center;  /* 所有段落文字居中 */
    }

    /* 高亮数字本身 */
    .page-6 .text-section .highlight-number {
        color: #e67e22;       /* 橙黄色 */
        font-weight: 700;     /* 加粗高亮文字 */
    }

    /* 页眉样式 */
    .page-6 .header {
        text-align: center;
        margin-bottom: 30px;
    }

    .page-6 .header .main-title {
        font-size: 2rem;
        font-weight: 700;
        color: #000000;
        margin-bottom: 8px;
    }

    .page-6 .header .subtitle {
        font-size: 1rem;
        color: #666;
    }
    /* 第六页文字动画样式 */
    .page6-text {
        opacity: 0;
        transform: translateY(30px);
        transition: all 0.8s ease;
        margin-bottom: 16px;
        text-align: center;
        font-size: 1.8rem;
        line-height: 1.8;
        color: #333;
    }

    .page6-text.show {
        opacity: 1;
        transform: translateY(0);
    }

    /* 高亮数字的特殊动画 */
    .page6-text.show .highlight-number {
        animation: highlightGlow 1.5s ease-out;
    }

    @keyframes highlightGlow {
        0% { 
            transform: scale(1);
            filter: brightness(1);
        }
        50% { 
            transform: scale(1.1);
            filter: brightness(1.3);
        }
        100% { 
            transform: scale(1);
            filter: brightness(1);
        }
    }

    /* 标题特殊样式 */
   
    .page-6 .text-section > h2.page6-text {
    font-size: 2.6rem;      /* 你原来的大小 */
    font-weight: 600;       /* 加粗 */
    color: #000;            /* 你原来的颜色 */
    margin-bottom: 30px;    /* 你原来的间距 */
}

/* —— 让所有正文段落恢复常规字重 —— */
.page-6 .text-section > p.page6-text {
    font-weight: normal !important;
}
    /* —— 缩小第六页图表和统计面板之间的间距 —— */

        /* ---- 图表容器 ---- */
        .page-6 .chart-container {
        width: 100%;
        max-width: 1200px;
        height: 500px;
        margin: 0 auto 0px;
        position: relative;
        }

        /* ---- 统计面板 ---- */
        .page-6 .stats-panel {
        max-width: 1200px;
        margin: 0 auto;
        }

        .page-6 .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        }

        .page-6 .stat-item {
        background: #fff;
        padding: 20px;
        border-radius: 8px;
        text-align: center;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }

        .page-6 .stat-item .stat-number {
        font-size: 1.5rem;
        font-weight: 700;
        margin-bottom: 4px;
        }

        .page-6 .stat-item:nth-child(1) .stat-number {
        color: #afd3e7;
        }

        .page-6 .stat-item:nth-child(2) .stat-number {
        color: #fca3a3;
        }

        .page-6 .stat-item:nth-child(3) .stat-number {
        color: #fdcd8c;
        }

        .page-6 .stat-item:nth-child(4) .stat-number {
        color: #d0bbdb;
        }

        .page-6 .stat-item .stat-label {
        font-size: 0.9rem;
        color: #555;
        }

       /* ================= 第七页样式 ================= */
        .page-7 {
            min-height: 100vh;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 80px 20px;
            position: relative;
            overflow: hidden;
        }

        /* 标题和导语样式 */
        .page7-header {
            text-align: center;
            margin-bottom: 60px;
        }

        .page7-title {
            font-size: 3.2rem;
            font-weight: 700;
            color: #000000;
            margin-bottom: 30px;
            line-height: 1.4;
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s ease;
        }

        .page7-intro {
            max-width: 800px;
            margin: 0 auto;
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s ease 0.2s;
        }

        .page7-intro p {
            font-size: 1.6rem;
            line-height: 1.8;
            color: #555;
            margin-bottom: 10px;
        }

        /* 扑克牌容器 */
        .poker-cards-container {
            display: grid;
  grid-template-columns: repeat(4, minmax(280px, 1fr)); /* 固定 4 列 */
  gap: 30px;
            padding: 0 20px;
            max-width: 1200px;
            margin: 0 auto 80px;
            padding: 0 20px;
        }

        /* 扑克牌基础样式 */
        .poker-card {
            perspective: 1000px;
            height: 400px;
            cursor: pointer;
            transform: translateY(50px);
            transition: all 0.6s ease;
        }

        .poker-card:nth-child(1) { transition-delay: 0.1s; }
        .poker-card:nth-child(2) { transition-delay: 0.2s; }
        .poker-card:nth-child(3) { transition-delay: 0.3s; }
        .poker-card:nth-child(4) { transition-delay: 0.4s; }

        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.8s;
            transform-style: preserve-3d;
        }

        .poker-card:hover .card-inner {
            transform: rotateY(180deg);
        }

        /* 卡片正反面 */
        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 30px;
        }

        .card-front {
            background: white;
            border: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .card-back {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            transform: rotateY(180deg);
        }

        /* 根据类别设置边框颜色 */
        .poker-card[data-category="cancer"] .card-front {
            border-color: #ed5f5f;
        }

        .poker-card[data-category="chronic"] .card-front {
            border-color: #ffa74f;
        }

        .poker-card[data-category="rare"] .card-front {
            border-color: #53a8e1;
        }

        .poker-card[data-category="other"] .card-front {
            border-color: #9a72c7;
        }

        /* 悬停效果 */
        .poker-card:hover .card-front {
            transform: translateZ(10px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
        }

        /* 卡片图标 */
        .card-icon {
            width: 100px;
            height: 100px;
            margin-bottom: 20px;
        }

        .card-icon svg {
            width: 100%;
            height: 100%;
        }

        /* 卡片内容 */
        .card-title {
            font-size: 1.6rem;
            font-weight: 600;
            color: #000000;
            margin-bottom: 20px;
        }

        .card-number {
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .poker-card[data-category="cancer"] .card-number { color: #ed5f5f; }
        .poker-card[data-category="chronic"] .card-number { color: #ffa74f; }
        .poker-card[data-category="rare"] .card-number { color: #53a8e1; }
        .poker-card[data-category="other"] .card-number { color: #9a72c7; }

        .card-desc {
            font-size: 1.2rem;
            color: #666;
        }

        /* 卡片背面样式 */
        .card-back h4 {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: #f39c12;
        }

        .card-back p {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 10px;
            opacity: 0.9;
        }

        /* 统计数据段落样式 */
        .statistics-section {
            max-width: 1000px;
            margin: 0 auto 60px;
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s ease 0.5s;
        }

        .stat-paragraph {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            display: flex;
            align-items: flex-start;
            gap: 20px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-paragraph::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            transition: width 0.3s ease;
        }

        .stat-paragraph[data-category="cancer"]::before { background: #ed5f5f; }
        .stat-paragraph[data-category="chronic"]::before { background: #ffa74f; }
        .stat-paragraph[data-category="rare"]::before { background: #53a8e1; }
        .stat-paragraph[data-category="other"]::before { background: #9a72c7; }

        .stat-paragraph:hover {
            transform: translateX(10px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.12);
        }

        .stat-paragraph:hover::before {
            width: 8px;
        }

        .stat-icon {
            font-size: 2rem;
            flex-shrink: 0;
        }

        .stat-paragraph p {
            font-size: 1.4rem;
            line-height: 1.8;
            color: #444;
            margin: 0;
        }

        .highlight-stat {
            color: #e74c3c;
            font-weight: 600;
            background: linear-gradient(120deg, #fff5f5, #ffe0e0);
            padding: 2px 6px;
            border-radius: 4px;
        }

        /* 气泡图容器 */
        .bubble-chart-container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            max-width: 1200px;
            margin: 0 auto 60px;
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s ease 0.6s;
        }

        .chart-title {
            font-size: 2rem;
            font-weight: 600;
            color: #000000;
            text-align: center;
            margin-bottom: 30px;
        }

        /* 结尾总结 */
        .page7-conclusion {
            max-width: 900px;
            margin: 0 auto;
            text-align: center;
            padding: 40px;
            background: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(255,255,255,0.8));
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s ease 0.7s;
        }

        .page7-conclusion p {
            font-size: 1.6rem;
            line-height: 2;
            color: #333;
        }

        .highlight-conclusion {
            color: #000000;
            font-weight: 700;
            background: linear-gradient(120deg, #f39c12, #e67e22);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* 动画效果类 */
        .page-7 .fade-in-element.show {
            opacity: 1;
            transform: translateY(0);
        }
        /* ========== 第八页整体布局 ========= */
.page-8 {
    background: #f0f2f5;
    padding: 60px 20px;
    min-height: 300vh;
    box-sizing: border-box;
}
/* 标题 */
.page8-title {
    font-size: 3.2rem; font-weight:700; color:#000;
    text-align:center; margin-bottom:20px;
    opacity:0; transform:translateY(30px);
    transition:all 0.8s ease;
}
.page8-title.show { opacity:1; transform:translateY(0); }
/* 副标题 */
.page8-subtitle {
    font-size:1.8rem; color:#666; text-align:center;
    margin-bottom:100px; opacity:0; transform:translateY(30px);
    transition:all 0.8s ease 0.3s;
}
.page8-subtitle.show { opacity:1; transform:translateY(0); }

/* —— 故事段落 —— */
.story-container { max-width:900px; margin:0 auto; position:relative; }
.story-paragraph {
    font-size:1.8rem; line-height:1.6; color:#333;
    margin-bottom:120px; text-align:center;
    opacity:0; transform:translateY(50px);
    transition:all 1s ease; padding:0 20px; box-sizing:border-box;
}
.story-paragraph.show { opacity:1; transform:translateY(0); }
.highlight-quote { color:#f39c12; font-weight:700; font-size:1.8rem; }
.story-paragraph1 {
    font-size:1.8rem; line-height:1.6; color:#333;
    margin-bottom:120px; text-align:left;
    opacity:0; transform:translateY(50px);
    transition:all 1s ease; padding:0 20px; box-sizing:border-box;
}
.story-paragraph1.show { opacity:1; transform:translateY(0); }
/* —— 图片卡片 —— */
.image-section {
    margin:150px 0; opacity:0; transform:scale(0.8) translateY(50px);
    transition:all 1.2s ease;
}
.image-section.show { opacity:1; transform:scale(1) translateY(0); }
.image-card { background:#fff; border-radius:25px; padding:40px;
    box-shadow:0 20px 60px rgba(0,0,0,0.1); position:relative;
    overflow:hidden; transition:all 0.3s ease;
}
.image-card:hover { transform:translateY(-10px); box-shadow:0 30px 80px rgba(0,0,0,0.15); }
.image-card::before { content:''; position:absolute; top:0; left:0; right:0; height:6px;
    background:linear-gradient(135deg,#f39c12,#e67e22);
}
.story-image { width:100%; max-width:600px; height:350px; object-fit:cover;
    border-radius:20px; margin:0 auto 30px; display:block;
    box-shadow:0 10px 30px rgba(0,0,0,0.1);
}
.image-title { font-size:2rem; font-weight:600; color:#2c3e50; text-align:center; margin-bottom:20px; }
.image-description { font-size:1.4rem; line-height:1.8; color:#555; text-align:center; margin-bottom:20px; }
.image-source { font-size:1rem; color:#888; text-align:center; font-style:italic; }
.price-highlight { color:#e74c3c; font-weight:700; background:linear-gradient(120deg,#fff5f5,#ffe0e0);
    padding:4px 8px; border-radius:6px; display:inline-block; margin:0 5px;
}

/* —— 词云图 —— */
.wordcloud-section { margin:150px 0; text-align:center; opacity:0; transform:translateY(50px);
    transition:all 1s ease;
}
.wordcloud-section.show { opacity:1; transform:translateY(0); }
.wordcloud-title { font-size:2.2rem; font-weight:600; color:#2c3e50; margin-bottom:30px; }
.wordcloud-image { max-width:100%; height:auto; border-radius:15px; box-shadow:0 15px 40px rgba(0,0,0,0.1); }

/* —— 过渡文本 —— */
.chart-transition { margin:150px 0 100px; text-align:center; opacity:0; transform:translateY(50px);
    transition:all 1s ease;
}
.chart-transition.show { opacity:1; transform:translateY(0); }
.transition-text { font-size:1.8rem; line-height:1.8; color:#000000; background:#fff;
    padding:40px; border-radius:20px; box-shadow:0 10px 30px rgba(0,0,0,0.08);
}

/* —— ECharts 容器 —— */
/* —— 第八页舆情图表容器 —— */
.page8-chart {
    max-width: 1200px;
    margin: 0 auto;
    background: #fff;
    border-radius: 20px;
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
    overflow: hidden;

    /* 初始隐藏 & 动画 */
    opacity: 0;
    transform: translateY(50px);
    transition: all 1s ease;

    /* —— 新增这一行 —— */
    min-height: 800px;    /* 保证容器足够高，缓解动画卡顿 */
}

.page8-chart.show {
    opacity: 1;
    transform: translateY(0);
}

/* —— ECharts 挂载点 —— */
#main {
    width: 100%;
    /* —— 改成百分比，让它撑满父容器 —— */
    height: 100%;
    /* —— 新增这一行 —— */
    min-height: 800px;    /* 和 .page8-chart 保持一致 */

    background: transparent;
}

/* ===== Chat-Sentiment Section ===== */
.chat-sentiment-section{
  position:relative;
  margin:120px 0;
  padding:40px;
  background:rgba(255,255,255,.10);
  backdrop-filter:blur(10px);
  border-radius:20px;
  overflow:hidden;
}

.page-8 .content-wrapper{
  display:grid;
  grid-template-columns:1fr 2fr 1fr;
  gap:40px;
}

/* —— 聊天气泡 —— */
.bubble-column{position:relative}
.chat-bubble{
  max-width:260px;margin-bottom:28px;
  opacity:0;transform:translateY(40px) scale(.9);
  transition:.8s cubic-bezier(.25,.46,.45,.94);
}
.chat-bubble.show{opacity:1;transform:none}

.left-bubbles  .chat-bubble{margin-right:auto;transform:translate(-30px,40px) scale(.9)}
.left-bubbles  .chat-bubble.show{transform:none}
.right-bubbles .chat-bubble{margin-left:auto; transform:translate(30px,40px) scale(.9)}
.right-bubbles .chat-bubble.show{transform:none}

.user-avatar{
  width:40px;height:40px;border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  font-size:1.2rem;margin-bottom:8px;color:#fff;
  box-shadow:0 2px 6px rgba(0,0,0,.1)
}
.left-bubbles  .user-avatar{background:linear-gradient(135deg,#2c3e50,#2c3e50)}
.right-bubbles .user-avatar{background:linear-gradient(135deg,#FF9500,#FF8C00)}

.bubble-content{
  padding:12px 16px;font-size:1rem;line-height:1.5;color:#fff;
  box-shadow:0 4px 12px rgba(0,0,0,.15);
  border-radius:18px 18px 18px 4px;
  background:linear-gradient(135deg,#2c3e50,#2c3e50);
  position:relative
}
.right-bubbles .bubble-content{
  border-radius:18px 18px 4px 18px;
  background:linear-gradient(135deg,#FF9500,#FF8C00)
}
/* bubble “小尾巴” */
.left-bubbles  .bubble-content::before,
.right-bubbles .bubble-content::before{
  content:'';position:absolute;bottom:0;width:0;height:0;border-style:solid
}
.left-bubbles  .bubble-content::before{
  left:-8px;border-width:0 8px 12px 0;border-color:transparent #2c3e50 transparent transparent
}
.right-bubbles .bubble-content::before{
  right:-8px;border-width:0 0 12px 8px;border-color:transparent transparent #FF8C00 transparent
}
.bubble-meta{font-size:.75rem;opacity:.7;margin-top:4px;text-align:right}

/* —— 中间解读 —— */
.analysis-center{display:flex;flex-direction:column;justify-content:center}

/* —— 背景漂浮小圆 —— */
.background-bubbles .bg-bubble{
  position:absolute;border-radius:50%;
  background:rgba(255,255,255,.15);
  animation:floatUp 18s linear infinite
}
@keyframes floatUp{
  0%{transform:translateY(120%) rotate(0);opacity:0}
  10%{opacity:.9}
  90%{opacity:.9}
  100%{transform:translateY(-150%) rotate(360deg);opacity:0}
}

/* —— 移动端 —— */
@media (max-width:768px){
  .content-wrapper{grid-template-columns:1fr;gap:24px}
  .chat-bubble{max-width:100%}
}

/* —— 响应式 —— */
@media(max-width:768px){
  .page8-title{font-size:2.5rem;}
  .story-paragraph{font-size:1.5rem;margin-bottom:80px;}
  .highlight-quote{font-size:1.5rem;}
  .story-image{height:250px;}
  .image-card{padding:25px;}
}
@media(max-width:480px){
  .page-8{padding:40px 15px;}
  .story-paragraph{font-size:1.3rem;}
}
/* 整体卡片容器 */
.network-card{
    margin:60px auto;
    max-width:1200px;
    background:#fff;
    border-radius:16px;
    box-shadow:0 10px 30px rgba(0,0,0,.08);   /* 较轻阴影 */
    overflow:hidden;
    position:relative;
  }
  .network-card .header{
    padding:24px 48px 24px 24px;
    text-align:center;
    position:relative;
  }
  .network-card h1{font-size:24px;color:#1f2937;margin-bottom:8px;}
  .network-card .subtitle{font-size:14px;color:#6b7280;}

  /* —— 控制按钮 —— */
  .network-card .controls{position:absolute;top:24px;right:24px;display:flex;gap:12px;}
  .net-btn{
    padding:8px 20px;border:none;border-radius:8px;font-size:14px;cursor:pointer;
    color:#fff;transition:.3s;
  }
  .net-btn-primary   {background:#f59e0b;}
  .net-btn-secondary {background:#6366f1;}
  .net-btn-tertiary  {background:#10b981;}
  .net-btn-quaternary{background:#06b6d4;}
  .net-btn:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,.15);}

  /* —— 可视化画布 —— */
  #networkVisualization{background:#fafafa;min-height:800px;position:relative;}
  #networkVisualization svg{width:100%;height:800px;}

  /* —— 图例 —— */
  .network-card .legend{
    position:absolute;left:24px;top:24px;background:#fff;padding:20px;border-radius:12px;
    box-shadow:0 4px 12px rgba(0,0,0,.1);font-size:14px;
  }
  .legend-item{display:flex;align-items:center;margin-bottom:8px;}
  .legend-color{width:20px;height:20px;border-radius:4px;margin-right:8px;}

  /* —— 节点/边 —— */
  .link{fill:none;stroke-linecap:round;stroke-opacity:.4;}
  .node circle{stroke:#fff;stroke-width:2px;transition:.3s;}
  .node text{pointer-events:none;font-size:12px;fill:#374151;text-anchor:middle;}
  .highlight{opacity:1!important;}
  .fade{opacity:.1!important;}

  /* —— Tooltip —— */
  .network-tooltip{
    position:absolute;pointer-events:none;opacity:0;transition:.3s;
    padding:12px;background:rgba(0,0,0,.85);color:#fff;border-radius:8px;font-size:14px;z-index:1000;
  }


        /* 特殊动画效果 */
        @keyframes cardFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .poker-card:hover {
            animation: cardFloat 3s ease-in-out infinite;
        }

        /* 加载动画 */
        @keyframes shimmer {
            0% { background-position: -200% center; }
            100% { background-position: 200% center; }
        }

        .poker-card.loading .card-front {
            background: linear-gradient(
                90deg,
                #f0f0f0 25%,
                #e0e0e0 50%,
                #f0f0f0 75%
            );
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        } 
    </style>
    <style>

        /* ========== 第九页整体布局 ========== */
        .page-9 {
            min-height: 100vh;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 80px 20px;
            position: relative;
            overflow: hidden;
        }

        /* 页面标题 */
        .page9-header {
            text-align: center;
            margin-bottom: 80px;
            max-width: 1000px;
            margin-left: auto;
            margin-right: auto;
        }

        .page9-title {
            font-size: 3.1rem;
            font-weight: 800;
            color: #000000;
            margin-bottom: 40px;
            line-height: 1.4;
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s ease;
        }

        .page9-intro {
            font-size: 1.5rem;
            line-height: 1.8;
            color: #555;
            text-align: center;
            margin-bottom: 60px;
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s ease 0.3s;
        }

        /* 插图区域 */
        .hero-image-section {
            text-align: center;
            margin: 60px 0;
            opacity: 0;
            transform: scale(0.9) translateY(30px);
            transition: all 1s ease 0.6s;
        }

        .hero-image {
            max-width: 600px;
            width: 100%;
            height: auto;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .hero-image:hover {
            transform: scale(1.05);
            box-shadow: 0 20px 50px rgba(0,0,0,0.15);
        }

        /* 主要内容区域 */

        /* 药品展示网格 */
        .medicine-showcase {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 80px;
        }

        .medicine-card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            opacity: 0;
            transform: translateY(50px) scale(0.9);
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .medicine-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 20px 50px rgba(0,0,0,0.15);
        }

        .medicine-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .medicine-card.show {
            opacity: 1;
            transform: translateY(0) scale(1);
        }

        .medicine-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .medicine-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 20px;
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .medicine-name {
            flex: 1;
        }

        .medicine-title {
            font-size: 1.6rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .medicine-category {
            font-size: 1rem;
            color: #7f8c8d;
            background: #ecf0f1;
            padding: 4px 12px;
            border-radius: 12px;
            display: inline-block;
        }

        .medicine-description {
            font-size: 1.2rem;
            line-height: 1.6;
            color: #555;
            margin-bottom: 20px;
        }

        .medicine-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 15px;
            border-top: 1px solid #ecf0f1;
        }

        .urgency-level {
            display: flex;
            align-items: center;
            font-size: 0.9rem;
            color: #e74c3c;
            font-weight: 600;
        }

        .urgency-dots {
            margin-left: 8px;
        }

        .urgency-dot {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #e74c3c;
            margin-right: 3px;
        }

        /* 结语区域 */
        .conclusion-section {
            background: white;
            border-radius: 20px;
            padding: 50px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            margin-top: 60px;
            opacity: 0;
            transform: translateY(50px);
            transition: all 1s ease;
            position: relative;
            overflow: hidden;
        }
        .page-9 .content-wrapper{
    display: block;          /* 让它重新占满整行 */
    width: 100%;             /* 让内部 grid 真正能算列数 */
}

/* 顺手把网格也改得更稳妥一点 */
.page-9 .medicine-showcase{
    display: grid;
    grid-template-columns: repeat(auto-fill,minmax(350px,1fr));
    gap: 25px;
    width: 100%;
}
        .conclusion-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: linear-gradient(135deg, #3498db, #2980b9);
        }

        .conclusion-section.show {
            opacity: 1;
            transform: translateY(0);
        }

        .conclusion-text {
            font-size: 1.6rem;
            line-height: 2;
            color: #2c3e50;
            text-align: center;
            max-width: 900px;
            margin: 0 auto;
        }

        /* 漂浮药品动画背景 */
        .floating-medicines {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 1;
            pointer-events: none;
        }

        .floating-medicine {
            position: absolute;
            opacity: 0.08;
            animation: float 20s infinite linear;
            font-size: 2rem;
        }

        .floating-medicine:nth-child(1) { left: 10%; animation-delay: 0s; }
        .floating-medicine:nth-child(2) { left: 20%; animation-delay: -4s; }
        .floating-medicine:nth-child(3) { left: 30%; animation-delay: -8s; }
        .floating-medicine:nth-child(4) { left: 40%; animation-delay: -12s; }
        .floating-medicine:nth-child(5) { left: 50%; animation-delay: -16s; }
        .floating-medicine:nth-child(6) { left: 60%; animation-delay: -3s; }
        .floating-medicine:nth-child(7) { left: 70%; animation-delay: -7s; }
        .floating-medicine:nth-child(8) { left: 80%; animation-delay: -11s; }

        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg);
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
            }
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            .page9-title {
                font-size: 2.5rem;
            }
            
            .page9-intro {
                font-size: 1.4rem;
            }
            
            .medicine-showcase {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .medicine-card {
                padding: 20px;
            }
            
            .conclusion-section {
                padding: 30px 20px;
            }
            
            .conclusion-text {
                font-size: 1.4rem;
            }

            .hero-image {
                max-width: 400px;
            }
        }

        /* 动画效果类 */

        /* 特殊动画效果 */
        .pulse-effect {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(231, 76, 60, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(231, 76, 60, 0); }
            100% { box-shadow: 0 0 0 0 rgba(231, 76, 60, 0); }
        }
    /* ========== 第十页整体布局 ========== */
    .page-10 {
        min-height: 100vh;
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        padding: 80px 20px;
        position: relative;
        overflow: hidden;
    }
    
    /* 页面标题 */
    .page-10 .page10-header {
        text-align: center;
        margin-bottom: 80px;
        max-width: 1000px;
        margin-left: auto;
        margin-right: auto;
    }
    
    .page-10 .page10-title {
        font-size: 3.5rem;
        font-weight: 700;
        color: #000000;
        margin-bottom: 40px;
        line-height: 1.4;
        opacity: 0;
        transform: translateY(30px);
        transition: all 0.8s ease;
    }
    
    .page-10 .page10-intro {
        font-size: 1.6rem;
        line-height: 1.8;
        color: #555;
        text-align: left;
        margin-bottom: 60px;
        opacity: 0;
        transform: translateY(30px);
        transition: all 0.8s ease 0.3s;
    }
    
    /* 主要内容区域 */
    .page-10 .content-wrapper {
        position: relative;
        z-index: 10;
        max-width: 1400px;
        margin: 0 auto;
    }
    
    /* 留言板主体 */
    .page-10 .message-board-container {
        background: linear-gradient(145deg, #ffffff 0%, #fafbfc 100%);
        border-radius: 30px;
        box-shadow:
            0 30px 80px rgba(0,0,0,0.08),
            0 10px 30px rgba(0,0,0,0.05),
            inset 0 1px 0 rgba(255,255,255,0.9);
        padding: 0;
        margin-bottom: 80px;
        position: relative;
        overflow: hidden;
        opacity: 0;
        transform: translateY(50px);
        transition: all 1s ease 0.6s;
        border: 1px solid rgba(255,255,255,0.3);
    }
    
    .page-10 .message-board-container::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #f5576c 75%, #4facfe 100%);
        background-size: 400% 100%;
        animation: gradientFlow 4s ease-in-out infinite;
    }
    
    /* 留言输入区域 */
    .page-10 .message-input-section {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        padding: 50px 60px;
        position: relative;
        overflow: hidden;
    }
    
    .page-10 .message-input-section::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="2" fill="rgba(255,255,255,0.1)"/><circle cx="80" cy="40" r="1" fill="rgba(255,255,255,0.15)"/><circle cx="40" cy="80" r="1.5" fill="rgba(255,255,255,0.1)"/></svg>');
        animation: floatDots 20s linear infinite;
    }
    
    .page-10 .input-title {
        font-size: 2.2rem;
        font-weight: 700;
        margin-bottom: 15px;
        text-align: center;
        position: relative;
        z-index: 2;
        text-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .page-10 .input-subtitle {
        font-size: 1.1rem;
        text-align: center;
        margin-bottom: 40px;
        opacity: 0.9;
        position: relative;
        z-index: 2;
    }
    
    .page-10 .input-form {
        position: relative;
        z-index: 2;
        max-width: 800px;
        margin: 0 auto;
    }
    
    .page-10 .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin-bottom: 20px;
    }
    
    .page-10 .form-field { position: relative; }
    
    .page-10 .form-field.full-width { grid-column: 1 / -1; }
    
    .page-10 .form-input {
        width: 100%;
        padding: 18px 25px;
        border: none;
        border-radius: 15px;
        font-size: 1.1rem;
        background: rgba(255,255,255,0.95);
        backdrop-filter: blur(10px);
        color: #2c3e50;
        transition: all 0.3s ease;
        box-shadow:
            0 8px 25px rgba(0,0,0,0.1),
            inset 0 1px 0 rgba(255,255,255,0.9);
    }
    
    .page-10 .form-input:focus {
        outline: none;
        background: rgba(255,255,255,1);
        transform: translateY(-2px);
        box-shadow:
            0 15px 35px rgba(0,0,0,0.15),
            0 0 0 3px rgba(255,255,255,0.3);
    }
    
    .page-10 .form-input::placeholder {
        color: #95a5a6;
        font-style: italic;
    }
    
    .page-10 .form-textarea { min-height: 100px; resize: vertical; font-family: inherit; }
    
    .page-10 .submit-button {
        display: block;
        margin: 30px auto 0;
        padding: 18px 50px;
        background: linear-gradient(135deg, #ffffff, #f8f9fa);
        color: #667eea;
        border: none;
        border-radius: 50px;
        font-size: 1.2rem;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow:
            0 8px 25px rgba(0,0,0,0.1),
            inset 0 1px 0 rgba(255,255,255,0.9);
        position: relative;
        overflow: hidden;
    }
    
    .page-10 .submit-button::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
        transition: left 0.5s ease;
    }
    
    .page-10 .submit-button:hover {
        transform: translateY(-3px);
        box-shadow:
            0 15px 40px rgba(0,0,0,0.15),
            inset 0 1px 0 rgba(255,255,255,0.9);
        background: linear-gradient(135deg, #f8f9fa, #ffffff);
    }
    
    .page-10 .submit-button:hover::before { left: 100%; }
    
    /* 卡片瀑布流展示区域 */
    .page-10 .messages-display { padding: 50px 40px; }
    
    .page-10 .messages-header { text-align: center; margin-bottom: 40px; }
    
    .page-10 .messages-title {
        font-size: 2.2rem;
        font-weight: 700;
        color: #2c3e50;
        margin-bottom: 20px;
        position: relative;
    }
    
    .page-10 .filter-tabs {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-bottom: 30px;
        flex-wrap: wrap;
    }
    
    .page-10 .filter-tab {
        padding: 10px 20px;
        border: 2px solid #e9ecef;
        border-radius: 25px;
        background: white;
        color: #666;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 500;
    }
    
    .page-10 .filter-tab.active {
        border-color: #667eea;
        background: #667eea;
        color: white;
    }
    
    .page-10 .filter-tab:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    .page-10 .messages-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin-top: 30px;
    }
    
    .page-10 .message-card {
        background: white;
        border-radius: 20px;
        padding: 25px;
        position: relative;
        transition: all 0.3s ease;
        opacity: 0;
        transform: translateY(30px);
        animation: cardFadeIn 0.6s ease forwards;
        border-left: 5px solid #667eea;
        overflow: hidden;
    }
    
    .page-10 .message-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, transparent 80%, rgba(255,255,255,0.1));
        opacity: 0;
        transition: opacity 0.3s ease;
    }
    
    .page-10 .message-card:hover {
        transform: translateY(-10px) rotateY(5deg);
        box-shadow:
            0 20px 40px rgba(0,0,0,0.1),
            0 10px 20px rgba(0,0,0,0.05);
    }
    
    .page-10 .message-card:hover::before { opacity: 1; }
    
    .page-10 .message-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 15px;
    }
    
    .page-10 .medicine-name {
        font-size: 1.4rem;
        font-weight: 700;
        color: #2c3e50;
        margin-bottom: 5px;
    }
    .page-10 .content-wrapper{
  display:block;        /* 或 flex-direction:column; 都行 */
  width:100%;
}

/* --- 可选：大屏时再排成三列 --- */
@media (min-width:1200px){
  .page-10 .content-wrapper{
    display:grid;
    grid-template-columns: 1fr 1fr 1fr;   /* 三块等宽 */
    gap:40px;
  }
}
    .page-10 .medicine-category {
        display: inline-block;
        padding: 4px 12px;
        border-radius: 15px;
        font-size: 0.8rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }
    
    .page-10 .category-options {
        position: absolute;
        top: 100%;
        right: 0;
        background: white;
        border-radius: 10px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        padding: 10px;
        display: none;
        z-index: 100;
        min-width: 150px;
    }
    
    .page-10 .category-option {
        display: block;
        padding: 8px 12px;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.2s ease;
        font-size: 0.9rem;
    }
    
    .page-10 .category-option:hover { background: #f8f9fa; }
    
    .page-10 .message-content { margin-bottom: 15px; }
    
    .page-10 .message-detail {
        margin-bottom: 8px;
        font-size: 0.95rem;
        color: #666;
    }
    
    .page-10 .message-detail strong { color: #2c3e50; }
    
    .page-10 .message-story {
        background: #f8f9fa;
        padding: 15px;
        border-radius: 10px;
        margin: 15px 0;
        font-style: italic;
        color: #555;
        border-left: 3px solid currentColor;
    }
    
    .page-10 .message-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 15px;
        padding-top: 15px;
        border-top: 1px solid #f0f0f0;
    }
    
    .page-10 .message-time {
        font-size: 0.85rem;
        color: #95a5a6;
        font-style: italic;
    }
    
    .page-10 .hope-meter { display: flex; align-items: center; gap: 8px; }
    
    .page-10 .hope-hearts { display: flex; gap: 2px; }
    
    .page-10 .hope-heart {
        color: #e74c3c;
        font-size: 1.2rem;
        opacity: 0.3;
        transition: all 0.3s ease;
    }
    
    .page-10 .hope-heart.filled {
        opacity: 1;
        animation: heartBeat 1s ease-in-out;
    }
    
    .page-10 .empty-state {
        text-align: center;
        color: #95a5a6;
        padding: 80px 20px;
        grid-column: 1 / -1;
    }
    
    .page-10 .empty-state-icon {
        font-size: 4rem;
        margin-bottom: 20px;
        opacity: 0.6;
        animation: float 3s ease-in-out infinite;
    }
    
    /* 统计信息 */
    .page-10 .stats-section {
        background: linear-gradient(135deg, #3498db, #2980b9);
        color: white;
        border-radius: 20px;
        padding: 40px;
        margin-top: 50px;
        text-align: center;
        opacity: 0;
        transform: translateY(50px);
        transition: all 1s ease 1s;
    }
    
    .page-10 .stats-title { font-size: 1.8rem; font-weight: 600; margin-bottom: 20px; }
    
    .page-10 .stats-number {
        font-size: 3rem;
        font-weight: 700;
        margin-bottom: 10px;
        color: #fff;
        text-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }
    
    .page-10 .stats-description { font-size: 1.2rem; opacity: 0.9; }
    
    /* 行动呼吁区域 */
    .page-10 .call-to-action-final {
        background: linear-gradient(135deg, #2c3e50, #34495e);
        color: white;
        border-radius: 25px;
        padding: 50px;
        margin-top: 50px;
        text-align: center;
        position: relative;
        overflow: hidden;
        opacity: 0;
        transform: translateY(50px);
        transition: all 1s ease 1.2s;
    }
    
    .page-10 .call-to-action-final::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="2" fill="rgba(255,255,255,0.1)"/></svg>') repeat;
        animation: sparkle 10s linear infinite;
    }
    
    .page-10 .cta-final-title {
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 20px;
        position: relative;
        z-index: 2;
    }
    
    .page-10 .cta-final-text {
        font-size: 1.4rem;
        line-height: 1.8;
        position: relative;
        z-index: 2;
        opacity: 0.9;
    }
    
    /* 漂浮背景元素 */
    .page-10 .floating-elements {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
        z-index: 1;
        pointer-events: none;
    }
    
    .page-10 .floating-element {
        position: absolute;
        opacity: 0.05;
        animation: floatUp 20s infinite linear;
        font-size: 2rem;
    }
    
    .page-10 .floating-element:nth-child(1){ left:10%; animation-delay:0s;}
    .page-10 .floating-element:nth-child(2){ left:20%; animation-delay:-4s;}
    .page-10 .floating-element:nth-child(3){ left:30%; animation-delay:-8s;}
    .page-10 .floating-element:nth-child(4){ left:40%; animation-delay:-12s;}
    .page-10 .floating-element:nth-child(5){ left:50%; animation-delay:-16s;}
    .page-10 .floating-element:nth-child(6){ left:60%; animation-delay:-3s;}
    .page-10 .floating-element:nth-child(7){ left:70%; animation-delay:-7s;}
    .page-10 .floating-element:nth-child(8){ left:80%; animation-delay:-11s;}
    
    /* 动画效果类 */
    .page-10 .fade-in-element {
        opacity: 0;
        transform: translateY(30px);
        transition: all 0.8s ease;
    }
    
    .page-10 .fade-in-element.show { opacity: 1; transform: translateY(0); }
    
    /* 分类颜色主题 */
    .page-10 .category-heart   { background:linear-gradient(135deg,#e74c3c,#c0392b); color:#fff; border-color:#e74c3c;}
    .page-10 .category-cancer  { background:linear-gradient(135deg,#9b59b6,#8e44ad); color:#fff; border-color:#9b59b6;}
    .page-10 .category-diabetes{ background:linear-gradient(135deg,#3498db,#2980b9); color:#fff; border-color:#3498db;}
    .page-10 .category-pain    { background:linear-gradient(135deg,#2ecc71,#27ae60); color:#fff; border-color:#2ecc71;}
    .page-10 .category-mental  { background:linear-gradient(135deg,#f39c12,#e67e22); color:#fff; border-color:#f39c12;}
    .page-10 .category-rare    { background:linear-gradient(135deg,#e67e22,#d35400); color:#fff; border-color:#e67e22;}
    .page-10 .category-other   { background:linear-gradient(135deg,#95a5a6,#7f8c8d); color:#fff; border-color:#95a5a6;}
    
    /* ======= Media Query ======= */
    @media (max-width: 768px) {
        .page-10 .page10-title  { font-size: 2.8rem; }
        .page-10 .page10-intro  { font-size: 1.4rem; }
        .page-10 .message-board-container { margin: 20px 10px; }
        .page-10 .message-input-section,
        .page-10 .messages-display { padding: 30px 25px; }
        .page-10 .form-row { grid-template-columns: 1fr; }
        .page-10 .messages-grid { grid-template-columns: 1fr; }
        .page-10 .filter-tabs {
            justify-content: flex-start;
            overflow-x: auto;
            padding-bottom: 10px;
        }
    }

    .page-11 {
   min-height: 100vh;
   background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
   padding: 100px 20px;
   display: flex;
   align-items: center;
   justify-content: center;
   position: relative;
   overflow: hidden;
}

.page11-container {
   max-width: 1000px;
   width: 100%;
   margin: 0 auto;
   text-align: center;
}

.conclusion-content {
   background: rgba(255, 255, 255, 0.95);
   backdrop-filter: blur(20px);
   border-radius: 25px;
   padding: 60px 50px;
   box-shadow: 0 20px 50px rgba(0, 0, 0, 0.1);
   position: relative;
   overflow: hidden;
}

.conclusion-content::before {
   content: '';
   position: absolute;
   top: 0;
   left: 0;
   right: 0;
   height: 6px;
   background: linear-gradient(135deg, #667eea, #764ba2);
}

.conclusion-text-block {
   margin-bottom: 50px;
}

.conclusion-paragraph {
   font-size: 1.8rem;
   line-height: 2;
   color: #2c3e50;
   margin-bottom: 25px;
   text-align: left;
   opacity: 0;
   transform: translateY(30px);
   transition: all 0.8s ease;
}

.conclusion-paragraph.show {
   opacity: 1;
   transform: translateY(0);
}

.call-to-action {
   margin-top: 40px;
   opacity: 0;
   transform: translateY(30px);
   transition: all 0.8s ease;
}

.call-to-action.show {
   opacity: 1;
   transform: translateY(0);
}

.voice-button {
   background: linear-gradient(135deg, #667eea, #764ba2);
   color: white;
   border: none;
   padding: 20px 50px;
   border-radius: 50px;
   font-size: 1.4rem;
   font-weight: 600;
   cursor: pointer;
   position: relative;
   overflow: hidden;
   transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
   box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
   display: inline-flex;
   align-items: center;
   gap: 15px;
}

.voice-button::before {
   content: '';
   position: absolute;
   top: 0;
   left: -100%;
   width: 100%;
   height: 100%;
   background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
   transition: left 0.6s ease;
}

.voice-button:hover {
   transform: translateY(-5px) scale(1.05);
   box-shadow: 0 20px 40px rgba(102, 126, 234, 0.4);
   background: linear-gradient(135deg, #7c3aed, #6366f1);
}

.voice-button:hover::before {
   left: 100%;
}

.voice-button:active {
   transform: translateY(-2px) scale(1.02);
}

.button-arrow {
   font-size: 1.2rem;
   transition: transform 0.3s ease;
}

.voice-button:hover .button-arrow {
   transform: translateX(5px);
}

/* 动画效果类 */
.page-11 .fade-in-element {
   opacity: 0;
   transform: translateY(30px);
   transition: all 0.8s ease;
}

.page-11 .fade-in-element.show {
   opacity: 1;
   transform: translateY(0);
}

/* 响应式设计 */
@media (max-width: 768px) {
   .page-11 {
       padding: 60px 20px;
   }
   
   .conclusion-content {
       padding: 40px 30px;
   }
   
   .conclusion-paragraph {
       font-size: 1.5rem;
       margin-bottom: 20px;
   }
   
   .voice-button {
       padding: 18px 40px;
       font-size: 1.2rem;
   }
}

@media (max-width: 480px) {
   .conclusion-content {
       padding: 30px 20px;
   }
   
   .conclusion-paragraph {
       font-size: 1.3rem;
   }
   
   .voice-button {
       padding: 16px 35px;
       font-size: 1.1rem;
   }
}
    </style>
    <style>
        /* ================= 简单音乐按钮样式 ================= */
        .music-control {
            position: fixed;
            top: 30px;
            right: 30px;
            z-index: 10001; /* 确保在第一页之上 */
        }
        
        .music-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: none;
            background: rgb(255, 255, 255);
            backdrop-filter: blur(10px);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .music-btn:hover {
            transform: scale(1.1);
            background: rgba(255, 255, 255, 0.25);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        
        .music-btn:active {
            transform: scale(0.95);
        }
        
        .music-icon {
            font-size: 1.5rem;
            transition: all 0.3s ease;
        }
        
        /* 播放状态样式 */
        .music-btn.playing {
            background: rgba(102, 126, 234, 0.8);
            animation: musicPulse 2s ease-in-out infinite;
        }
        
        .music-btn.playing .music-icon::before {
            content: '🔊';
        }
        
        /* 脉冲动画 */
        @keyframes musicPulse {
            0%, 100% { 
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2), 0 0 0 0 rgba(102, 126, 234, 0.7);
            }
            50% { 
                box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3), 0 0 0 10px rgba(102, 126, 234, 0);
            }
        }
        
        /* 响应式设计 */
        @media (max-width: 768px) {
            .music-control {
                top: 20px;
                right: 20px;
            }
            
            .music-btn {
                width: 50px;
                height: 50px;
            }
            
            .music-icon {
                font-size: 1.2rem;
            }
        }
        </style>
</head>
<body>
    
    <!-- 第一页：封面页 -->
    <div class="page-1" id="page1">
        <div class="music-control" id="musicControl">
            <button class="music-btn" id="musicBtn" title="开启背景音乐">
                <span class="music-icon">🎵</span>
            </button>
        </div>
        
        <!-- 背景音乐（静音预播） -->
        <audio id="backgroundMusic" src="background-music.mp3" muted autoplay loop preload="auto" playsinline style="display:none;">
            <source src="background-music.mp3" type="audio/mpeg">
            <source src="background-music.ogg" type="audio/ogg">
        </audio>
        <h1 class="title">医保谈判的七年：救命药真的便宜了吗？</h1>
        <h2 class="subtitle">患者呼声未止，还有哪些药品亟待纳入国谈药？</h2>
        <div class="scroll-hint">
            <div class="scroll-text">向下滚动开始探索</div>
            <div class="scroll-arrow">↓</div>
        </div>
    </div>

    <!-- 第二页：谈判现场语录 -->
    <div class="page-2" id="page2">
        <div class="quotes-container" id="quotesContainer">
            <!-- 语录会通过JavaScript动态添加 -->
        </div>
        <div class="scene-description" id="sceneDescription">
            <p class="scene-text">这是2024年国家医保药品目录谈判现场最"平常"</p>
            <p class="scene-text">却也最牵动人心的一幕。</p>
            <p class="scene-text">长桌两侧，</p>
            <p class="scene-text">一边是药企代表，</p>
            <p class="scene-text highlight_1">他们考虑的是研发投入、定价逻辑与市场博弈；</p>
            <p class="scene-text">另一边是国家医保谈判专家，</p>
            <p class="scene-text highlight_1">他们关注的，是无数普通患者是否能够按时、长期用上救命药。</p>
            <p class="scene-text">在这张谈判桌上，每一粒药的定价，都是多方利益的最佳平衡点</p>
            <p class="scene-text">——既要保证药企的创新回报，维系医药研发的可持续性；</p>
            <p class="scene-text">又要突破"天价药"的桎梏，让救命药真正惠及普通患者。</p>
            <p class="scene-text">一场谈判，</p>
            <p class="scene-text">改变的从不只是几个数字，</p>
            <p class="scene-text highlight_1">而是无数家庭的命运轨迹。</p>
        </div>
    </div>

    <section class="page-2-5" id="page2-5">
        <div class="transition-content">
          <h2 class="transition-title">这些经过多轮“灵魂砍价”后被纳入医保目录的药品</h2>
          <h2 class="final-text">有一个共同的名字——“国谈药”。</h2>
          <div class="medicine-box-container" id="medicineBoxContainer">
            <img src="国谈药.jpg"
                 alt="医保药盒"
                 class="medicine-box-img">
          </div>
        </div>
      </section>
      
    

    <!-- 第三页：国谈药定义 -->
    <div class="page-3" id="page3">
        <div class="definition-container">
            
            
            <div class="definition-card fade-in-element">
                <div class="definition-content">
                    <h3>国家医保谈判药品（简称"国谈药"）</h3>
                    <p>是指医保部门与药品生产企业通过价格谈判，确定支付标准后，纳入医保目录报销并处于协议期的药品。</p>
                    <p class="highlight-text">"国谈药"均为企业独家生产的药品，多数为创新药。</p>
                    <p>目前，<span class="highlight">现行"国谈药"涵盖肿瘤、罕见病、高血压、糖尿病用药等多个治疗领域</span>，如治疗肿瘤的注射用卡瑞利珠单抗、治疗罕见病的诺西那生钠注射液等。</p>
                </div>
            </div>
        </div>
    </div>

    <!-- 第四页：逐个展示药品 -->
    <div class="page-4" id="page4">
        <h2 class="section-title fade-in-element">价格低、能报销，就是国谈药？</h2>
        
        <div class="sticky-container">
            <!-- 国谈药 -->
            <div class="drug-card" id="drug1">
                <div class="drug-avatar">
                    <img src="doc1.jpg" alt="国谈药医生">
                </div>
                <div class="drug-content">
                    <p>"我是<span class="highlight">国谈药</span>，由医保部门与我所在药企通过正式谈判后，才进入医保目录。</p>
                    <p>因为我<span class="highlight">通常是独家生产、价格昂贵的创新药</span>，所以需要谈清价格与协议期限。</p>
                    <p>只有谈成了，我才能在协议期内被纳入医保，并享受报销。"</p>
                </div>
            </div>

            <!-- 集采药 -->
            <div class="drug-card" id="drug2">
                <div class="drug-avatar">
                    <img src="doc2.jpg" alt="集采药医生">
                </div>
                <div class="drug-content">
                    <p>"我是<span class="highlight">集采药</span>，是由<span class="highlight">国家组织统一采购、集中中标</span>进来的药。</p>
                    <p>我不是独家药，而是<span class="highlight">可以替代、用量大、竞争多</span>的药品。</p>
                    <p>通过带量采购，我和一大批兄弟一起拼低价、拼产能，压下成本，也减轻了医院和患者的负担。"</p>
                </div>
            </div>

            <!-- 竞价药 -->
            <div class="drug-card" id="drug3">
                <div class="drug-avatar">
                    <img src="doc3.jpg" alt="竞价药医生">
                </div>
                <div class="drug-content">
                    <p>"我是<span class="highlight">竞价药</span>，也叫'竞价进入医保目录的药品'。</p>
                    <p>我的适用范围通常是<span class="highlight">非独家生产</span>的药品，通过医保部门组织的<span class="highlight">招标挂网</span>，由药企竞价决定谁能进医保。</p>
                    <p>我也要降价才能进目录，但不像国谈药那样逐个谈，而是<span class="highlight">靠市场竞争来定价。</span>"</p>
                </div>
            </div>
        </div>
    </div>
    
<!-- ================= 第五页 - 国家药品目录调整流程 ================= -->
<div class="page-5" id="page5">
    <!-- 引导文字，落点处换行 -->
    <h2 class="page5-title">一款药品需要经历怎样的流程，<br>才能真正“进医保”？</h2>
    <p class="intro-text white-text">
      无论是谈判、竞价，还是集中采购，药品最终的落点，<br>
      都是《国家基本医疗保险工伤保险和生育保险药品目录》
    </p>
    <p class="intro-text white-text">但进入目录，并非一蹴而就</p>
  
    <!-- 这里把那句话改成标题 -->
    
    <!-- 流程图容器 -->
    <div class="roadmap-container">
      <div class="header">
        <h1 class="main-title">国家药品目录调整流程</h1>
      </div>
  
      <div class="roadmap-path">
        <!-- SVG 路径（阴影 / 主线 / 高亮流向）-->
        <svg class="path-svg" viewBox="0 0 1200 400">
          <defs>
            <linearGradient id="pathGradient" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" style="stop-color:#667eea"/>
              <stop offset="20%" style="stop-color:#4A90E2"/>
              <stop offset="40%" style="stop-color:#67B7DC"/>
              <stop offset="60%" style="stop-color:#89CDF1"/>
              <stop offset="80%" style="stop-color:#67B7DC"/>
              <stop offset="100%" style="stop-color:#764ba2"/>
            </linearGradient>
            <linearGradient id="pathHighlight" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" style="stop-color:#ffffff; stop-opacity:0.9"/>
              <stop offset="50%" style="stop-color:#ffffff; stop-opacity:0.6"/>
              <stop offset="100%" style="stop-color:#ffffff; stop-opacity:0.9"/>
            </linearGradient>
          </defs>
          <path class="path-shadow"
                d="M 120 120 C 200 320, 280 350, 320 320 
                   C 360 290, 480 200, 560 160 
                   C 640 120, 720 250, 800 360 
                   C 880 470, 960 180, 1040 120"/>
          <path class="path-line"
                d="M 120 120 C 200 320, 280 350, 320 320 
                   C 360 290, 480 200, 560 160 
                   C 640 120, 720 250, 800 360 
                   C 880 470, 960 180, 1040 120"/>
          <path class="path-highlight"
                d="M 120 120 C 200 320, 280 350, 320 320 
                   C 360 290, 480 200, 560 160 
                   C 640 120, 720 250, 800 360 
                   C 880 470, 960 180, 1040 120"/>
        </svg>
  
        <!-- 五个流程节点，去掉 onclick，只保留 class -->
        <div class="step-node step-1">
          <div class="node-circle"><span class="node-number">01</span></div>
          <div class="step-label">准备阶段</div>
        </div>
        <div class="step-node step-2">
          <div class="node-circle"><span class="node-number">02</span></div>
          <div class="step-label">申报阶段</div>
        </div>
        <div class="step-node step-3">
          <div class="node-circle"><span class="node-number">03</span></div>
          <div class="step-label">专家评审</div>
        </div>
        <div class="step-node step-4">
          <div class="node-circle"><span class="node-number">04</span></div>
          <div class="step-label">谈判/竞价</div>
        </div>
        <div class="step-node step-5">
          <div class="node-circle"><span class="node-number">05</span></div>
          <div class="step-label">公布结果</div>
        </div>
        <div class="click-tip">点击查看具体流程</div>
      </div>
  
      <!-- 详情面板 -->
      <div id="details-panel" class="details-panel">
        <div id="details-content"></div>
      </div>
    </div>
  </div>
  <!-- ================= 第六页：文字引入 + 交互式图表 + 统计数据 ================= -->
<!-- ================= 第六页：数字轨迹 ================= -->
<div class="page-6" id="page6">
    <!-- 上半段文字（保持原来的 .text-section 宽度） -->
    <div class="text-section">
      <h2 class="page6-text">从十几种到百余种：医保谈判走过的七年</h2>
      <p class="page6-text">自<span class="highlight-number">2018</span>年起，</p>
      <p class="page6-text">国家医保谈判进入常态化运行，</p>
      <p class="page6-text">也在一年又一年的数字里，留下了清晰的变化轨迹。</p>
      <p class="page6-text">这七年里，</p>
      <p class="page6-text">共有<span class="highlight-number">754</span>种药品参与谈判，</p>
      <p class="page6-text">其中<span class="highlight-number">658</span>种成功进入医保目录。</p>
      <p class="page6-text">从最初的十几种，</p>
      <p class="page6-text">到近年每年稳定在<span class="highlight-number">120</span>种左右，</p>
      <p class="page6-text">谈判的覆盖面不断扩大。</p>
      <p class="page6-text">而比数量更让人惊喜的，</p>
      <p class="page6-text">是价格的变化。</p>
      <p class="page6-text">七年来，</p>
      <p class="page6-text">新增药品的平均降价幅度始终保持在<span class="highlight-number">50%</span>以上，</p>
      <p class="page6-text">个别药品甚至降幅超过<span class="highlight-number">90%</span>。</p>
    </div>
  
    <!-- —— 全宽容器：图表 + 统计面板 —— -->
    <div class="full-width-block">
      <div class="chart-container" style="width:100%; max-width:1200px; height:700px; margin:0 auto 40px;">
        <div id="chart" style="width:100%; height:100%;"></div>
      </div>
  
      <div class="stats-panel" style="max-width:1200px; margin:0 auto 60px;">
        <div class="stats-grid" style="display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); gap:20px;">
          <div class="stat-item">
            <div class="stat-number">754</div>
            <div class="stat-label">总谈判品种数量</div>
          </div>
          <div class="stat-item">
            <div class="stat-number">658</div>
            <div class="stat-label">总成功数量</div>
          </div>
          <div class="stat-item">
            <div class="stat-number">87%</div>
            <div class="stat-label">平均成功率</div>
          </div>
          <div class="stat-item">
            <div class="stat-number">60%</div>
            <div class="stat-label">平均降价幅度</div>
          </div>
        </div>
      </div>
    </div>
  
    <!-- 下半段文字（继续使用 .text-section） -->
    <div class="text-section">
      <p class="page6-text">这一连串数字背后，</p>
      <p class="page6-text">不只是一次次"灵魂砍价"，</p>
      <p class="page6-text">更是把无数患者从高价药前"望而却步"的门槛，</p>
      <p class="page6-text">重新拉回了可承受的起点。</p>
      <p class="page6-text">它不只是调控，更是现实的托底。</p>
      <p class="page6-text">在每一次定价锤定之后，</p>
      <p class="page6-text">都可能藏着一个家庭松了一口气的声音。</p>
    </div>
  </div>
  
  
  <!-- ================= 第七页：从高价救命药到普适性药物 ================= -->
<div class="page-7" id="page7">
    <!-- 标题和导语部分 -->
    <div class="page7-header">
        <h2 class="page7-title fade-in-element">从高价救命药到普适性药物，每一类人群都在被看到</h2>
        <div class="page7-intro fade-in-element">
            <p>七年来，那些曾经"遥不可及"的高价靶向药、罕见病药，渐渐被纳入；</p>
            <p>而那些关乎数亿人日常健康的慢性病药、儿童用药，也没有被遗漏。</p>
        </div>
    </div>

    <!-- 扑克牌展示区域 -->
    <div class="poker-cards-container fade-in-element">
        <div class="poker-card" data-category="cancer">
            <div class="card-inner">
                <div class="card-front">
                    <div class="card-icon">
                        <svg viewBox="0 0 100 100">
                            <!-- 癌症治疗图标 -->
                            <circle cx="50" cy="50" r="45" fill="#ed5f5f" opacity="0.2"/>
                            <path d="M50 20 L65 40 L60 50 L50 45 L40 50 L35 40 Z" fill="#ed5f5f"/>
                            <circle cx="50" cy="50" r="15" fill="#ed5f5f"/>
                        </svg>
                    </div>
                    <h3 class="card-title">癌症治疗药物</h3>
                    <div class="card-number">150</div>
                    <p class="card-desc">累计纳入品种</p>
                </div>
                <div class="card-back">
                    <h4>保障重点</h4>
                    <p>靶向药、免疫治疗药物</p>
                    <p>每年稳定新增约20种</p>
                    <p>让"救命药"不再遥不可及</p>
                </div>
            </div>
        </div>

        <div class="poker-card" data-category="chronic">
            <div class="card-inner">
                <div class="card-front">
                    <div class="card-icon">
                        <svg viewBox="0 0 100 100">
                            <!-- 慢性病图标 -->
                            <rect x="25" y="35" width="50" height="30" rx="15" fill="#ffa74f" opacity="0.3"/>
                            <path d="M30 50 Q50 30, 70 50 T90 50" fill="none" stroke="#ffa74f" stroke-width="3"/>
                            <circle cx="50" cy="50" r="5" fill="#ffa74f"/>
                        </svg>
                    </div>
                    <h3 class="card-title">慢性病管理药物</h3>
                    <div class="card-number">211</div>
                    <p class="card-desc">累计纳入品种</p>
                </div>
                <div class="card-back">
                    <h4>覆盖病种</h4>
                    <p>高血压、糖尿病、心脑血管</p>
                    <p>2020-2022年高速增长</p>
                    <p>减轻亿万患者用药负担</p>
                </div>
            </div>
        </div>

        <div class="poker-card" data-category="rare">
            <div class="card-inner">
                <div class="card-front">
                    <div class="card-icon">
                        <svg viewBox="0 0 100 100">
                            <!-- 罕见病图标 -->
                            <polygon points="50,20 60,40 80,40 65,55 75,75 50,60 25,75 35,55 20,40 40,40" fill="#53a8e1" opacity="0.3"/>
                            <circle cx="50" cy="50" r="8" fill="#53a8e1"/>
                        </svg>
                    </div>
                    <h3 class="card-title">罕见病药物</h3>
                    <div class="card-number">65</div>
                    <p class="card-desc">累计纳入品种</p>
                </div>
                <div class="card-back">
                    <h4>里程碑意义</h4>
                    <p>2019年起稳步拓展</p>
                    <p>覆盖多类稀有病种</p>
                    <p>为小众群体撑起保护伞</p>
                </div>
            </div>
        </div>

        <div class="poker-card" data-category="other">
            <div class="card-inner">
                <div class="card-front">
                    <div class="card-icon">
                        <svg viewBox="0 0 100 100">
                            <!-- 其他药物图标 -->
                            <rect x="35" y="25" width="30" height="50" rx="5" fill="#9a72c7" opacity="0.3"/>
                            <circle cx="50" cy="40" r="10" fill="#9a72c7"/>
                            <path d="M40 55 L60 55" stroke="#9a72c7" stroke-width="3"/>
                        </svg>
                    </div>
                    <h3 class="card-title">其他类别药物</h3>
                    <div class="card-number">232</div>
                    <p class="card-desc">累计纳入品种</p>
                </div>
                <div class="card-back">
                    <h4>多元保障</h4>
                    <p>儿童用药、精神类用药</p>
                    <p>感染性疾病用药等</p>
                    <p>满足不同人群特殊需求</p>
                </div>
            </div>
        </div>
    </div>

    <!-- 统计数据详细说明 -->
    <div class="statistics-section fade-in-element">
        <div class="stat-paragraph" data-category="cancer">
            <div class="stat-icon">📊</div>
            <p>统计数据显示，2018年至2024年间，<span class="highlight-stat">肿瘤治疗相关药物累计有150种纳入医保</span>，基本保持每年约20种的稳定新增，凸显国家对重大疾病药物可及性和可负担性保障的长期承诺。</p>
        </div>

        <div class="stat-paragraph" data-category="chronic">
            <div class="stat-icon">📈</div>
            <p>慢性病用药方面，呈现出显著上升趋势，特别是在2020至2022年间连续三年处于高位，<span class="highlight-stat">累计共有211种相关药品进入医保目录</span>，显示出政策对高血压、糖尿病等常见慢性病患者用药负担问题的积极回应。</p>
        </div>

        <div class="stat-paragraph" data-category="rare">
            <div class="stat-icon">🌟</div>
            <p>自2019年起，罕见病药物保障范围稳步拓展，<span class="highlight-stat">至2024年已累计纳入65种</span>，初步建立起覆盖多类稀有病种的基础医保支持框架。</p>
        </div>

        <div class="stat-paragraph" data-category="other">
            <div class="stat-icon">🏥</div>
            <p>此外，儿童用药、感染性疾病用药、精神类用药等其他类别药品则呈现波动式增长，<span class="highlight-stat">总量已达232种</span>，体现出医保目录结构在多元人群用药需求之间的平衡与适应。</p>
        </div>
    </div>

    <!-- 气泡图容器 -->
    <div class="bubble-chart-container fade-in-element">
        <h3 class="chart-title">医保目录纳入药品类型分布变化（2018—2024）</h3>
        <div id="bubbleChart" style="width: 100%; height: 500px;"></div>
    </div>

    
</div>

<!-- 第八页：舆情动态分析 -->
<!-- 第八页：舆情动态分析 -->
<div class="page-8" id="page8">
    <h2 class="page8-title" data-scroll="title">舆情温度计：医保谈判背后的情感图谱</h2>
    <p  class="page8-subtitle" data-scroll="subtitle">让"罕见"被看见，让爱不罕见！</p>
  
    <div class="story-container">
      <div class="story-paragraph" data-scroll="story1">
        钱冰桥的货车后座总铺着软垫，<br>6岁的儿子趴在上面，看窗外车流掠过。
      </div>
      <div class="story-paragraph" data-scroll="story2">
        孩子腰椎侧弯如弓，肌肉无力到无法坐直——2017年确诊SMA那天<br>"无药可医"四个字像车辙印，碾在这个父亲的日子里。
      </div>
      <div class="story-paragraph" data-scroll="story3">
        2019年，特效药"诺西那生钠"获批的消息曾让病友群刷屏，<br>但70万元一针的高昂标价让"有药可医"变得不真切。
      </div>
      <div class="story-paragraph" data-scroll="story4">
        按推荐疗程，6针、终身维持——费用足够在老家盖几栋楼。
      </div>
  
      <div class="image-section" data-scroll="image1">
        <div class="image-card">
          <img src="诺西那生钠.jpg" alt="诺西那生钠注射液" class="story-image">
          <h3 class="image-title">这就是那支改变命运的药</h3>
          <p class="image-description">
            诺西那生钠注射液，治疗SMA（脊髓性肌萎缩症）的特效药。<br>
            从<span class="price-highlight">70万元一针</span>到最终的<span class="price-highlight">3.3万元</span>，
            每一分钱的降价都承载着无数家庭的希望。
          </p>
          <p class="image-source">图片来源：视觉中国</p>
        </div>
      </div>
  
      <div class="story-paragraph" data-scroll="story5">
        <span class="highlight-quote">"就像看着救命绳在眼前，却够不着。"</span>
      </div>
  
      <div class="story-paragraph" data-scroll="story6">
        转折点出现在2021年11月的医保谈判间。<br>福建医保局张劲妮握着话筒，对药企代表重复：
      </div>
      <div class="story-paragraph" data-scroll="story5">
        <span class="highlight-quote">"每一个小群体都不应该被放弃。"</span>
      </div>
      <div class="image-section" data-scroll="image2">
        <div class="image-card">
          <img src="谈判现场.jpg" alt="医保谈判现场" class="story-image">
          <h3 class="image-title">决定命运的关键时刻</h3>
          <p class="image-description">
            2021年医保谈判现场，每一次报价的背后都是生命的重量。<br>
            在这个会议室里，决策者们用责任和坚持为患者争取希望。
          </p>
          <p class="image-source">图片来源：CCTV1新闻</p>
        </div>
      </div>
  
      <div class="story-paragraph" data-scroll="story7">
        当企业报价从5.368万一路降到3.402万，<br>她依然摇头："我们的底价空间是0。"
      </div>
      <div class="story-paragraph" data-scroll="story8">
        <span class="highlight-quote">最终，3.3万的数字落下时，不少人红了眼眶。</span>
      </div>
      <div class="story-paragraph" data-scroll="story8">
        2022年1月1日，诺西那生钠正式纳入医保，<br>同日，全国已有11省市近20名患者完成注射。
      </div>
  
      <div class="story-paragraph" data-scroll="story9">
        <span class="highlight-quote">"现在一切的辛酸值了。"</span>
      </div>
  
      <div class="wordcloud-section" data-scroll="wordcloud">
        <h3 class="wordcloud-title">网络声音：医保谈判的民意温度</h3>
        <img src="词云图.jpg" alt="舆情词云分析图" class="wordcloud-image">
      </div>
  
      <div class="story-paragraph1" data-scroll="wordcloud-desc1">
        本词云图以"医保谈判 罕见病"为关键词，采集相关微博下的评论内容（共计约3000条）生成，直观反映了公众在该议题中的关注焦点与情感倾向。
    </div>
    
    <div class="story-paragraph1" data-scroll="wordcloud-desc2">
        从词频分布来看，"关注""支持""让利患者""药价透明""人民健康""惠及百姓"等关键词高频出现，表明网民普遍聚焦于罕见病药品在医保谈判中的药品降价、患者减负与用药保障等方面的实际成效。
    </div>
    
    <div class="story-paragraph1" data-scroll="wordcloud-desc3">
        "社会共赢""减负""生命至上""携手"等词语的出现，也体现出公众对制度公平性、医保覆盖广度以及公共利益实现的高度关注。
    </div>
    </div>
  
    <div class="page8-chart" data-scroll="chart">
      <div id="main"></div>
    </div>
    <!-- ========= 舆情聊天气泡 | 插入点 ========= -->
<section class="chat-sentiment-section" id="chatSentiment">
    <!-- 背景浮泡 -->
    <div class="background-bubbles" id="chatBgBubbles"></div>
  
    <div class="content-wrapper">
      <!-- 左列 · 正向 / 支持 -->
      <div class="bubble-column left-bubbles">
        <div class="chat-bubble" data-scroll>
          <div class="user-avatar">👍</div>
          <div class="bubble-content">
            每一个小群体都不该被放弃。谈判代表的每次坚持，都是对患者利益的负责！
            <div class="bubble-meta">来自微博用户</div>
          </div>
        </div>
  
        <div class="chat-bubble" data-scroll>
          <div class="user-avatar">❤️</div>
          <div class="bubble-content">
            对于病人和病人家属来说都是好消息！
            <div class="bubble-meta">来自微博用户</div>
          </div>
        </div>
  
        <div class="chat-bubble" data-scroll>
          <div class="user-avatar">🙏</div>
          <div class="bubble-content">
            贴近民意，深得民心。为民众办实事！
            <div class="bubble-meta">来自微博用户</div>
          </div>
        </div>
  
        <div class="chat-bubble" data-scroll>
          <div class="user-avatar">💪</div>
          <div class="bubble-content">
            砍价高手，惠民政策很棒！
            <div class="bubble-meta">来自微博用户</div>
          </div>
        </div>
  
        <div class="chat-bubble" data-scroll>
          <div class="user-avatar">✊</div>
          <div class="bubble-content">
            坚决打击乱抬药价的行为！
            <div class="bubble-meta">来自微博用户</div>
          </div>
        </div>
  
        <div class="chat-bubble" data-scroll>
          <div class="user-avatar">🎯</div>
          <div class="bubble-content">
            关键是有效和可得，最好多让靶向药加入。
            <div class="bubble-meta">来自微博用户</div>
          </div>
        </div>
  
        <div class="chat-bubble" data-scroll>
          <div class="user-avatar">🌟</div>
          <div class="bubble-content">
            中国的医保真的很强大！分担了很多家庭压力，感谢国家惠民利民！
            <div class="bubble-meta">来自微博用户</div>
          </div>
        </div>
  
        <div class="chat-bubble" data-scroll>
          <div class="user-avatar">💖</div>
          <div class="bubble-content">
            中国的医疗服务越来越好，实惠又便民！
            <div class="bubble-meta">来自微博用户</div>
          </div>
        </div>
  
        <div class="chat-bubble" data-scroll>
          <div class="user-avatar">🎉</div>
          <div class="bubble-content">
            救命药大幅降价，太开心了！
            <div class="bubble-meta">来自微博用户</div>
          </div>
        </div>
  
        <div class="chat-bubble" data-scroll>
          <div class="user-avatar">🙌</div>
          <div class="bubble-content">
            绝对支持！用最低价的救命药，谢谢所有谈判者的善意！
            <div class="bubble-meta">来自微博用户</div>
          </div>
        </div>
      </div>
  
      <!-- 中列 · 解读文字 -->
      <div class="analysis-center">
        <p class="story-paragraph1" data-scroll>
          数据显示，2018-2024 年间，医保谈判相关舆情呈现<strong>“中性主导、正向增强、负面渐显”</strong>的总体特征。
        </p>
        <p class="story-paragraph1" data-scroll>
          在早期（2018-2019），<em>“中性表达”</em>占比超过七成，舆论以观望与信息获悉为主。
        </p>
        <p class="story-paragraph1" data-scroll>
          自 2020 年起，谈判机制趋于稳定，<em>“积极支持”</em>与<em>“理性认可”</em>明显上升，2020-2021 年尤为突出。
        </p>
        <p class="story-paragraph1" data-scroll>
          2022 年出现关键拐点：谈判期内<em>“理性认可”</em>首次超过中性，占比迅速攀升，公众参与感增强。
        </p>
        <p class="story-paragraph1" data-scroll>
          2023 年，<em>“担忧质疑”</em>情绪维持约 7% 的高位，同时谈判期<em>“中性表达”</em>再度回升，显示更理性谨慎的观望态度。
        </p>
        <p class="story-paragraph1" data-scroll>
          到 2024 年，<em>“担忧质疑”</em>进一步升至 11.9%，表明公众对公平性与覆盖范围的敏感度显著提高。
        </p>
        <p class="story-paragraph1" data-scroll>
          总体来看，随着制度演进，<em>“中性表达”</em>占比下降，而<em>“理性认可”</em>与<em>“担忧质疑”</em>成为后期舆情的两大变量，医保谈判进入更广泛的公众对话时代。
        </p>
      </div>
  
      <!-- 右列 · 质疑 / 担忧 -->
      <div class="bubble-column right-bubbles">
        <div class="chat-bubble" data-scroll>
          <div class="user-avatar">🤔</div>
          <div class="bubble-content">
            医保报销的药医院不开，让去外面的药店买，价格还是贵。
            <div class="bubble-meta">来自微博用户</div>
          </div>
        </div>
  
        <div class="chat-bubble" data-scroll>
          <div class="user-avatar">⚠️</div>
          <div class="bubble-content">
            不可单纯追求低价而牺牲药效，质量把关要更严。
            <div class="bubble-meta">来自微博用户</div>
          </div>
        </div>
  
        <div class="chat-bubble" data-scroll>
          <div class="user-avatar">💊</div>
          <div class="bubble-content">
            升血小板的药能不能也谈一谈？
            <div class="bubble-meta">来自微博用户</div>
          </div>
        </div>
  
        <div class="chat-bubble" data-scroll>
          <div class="user-avatar">⚖️</div>
          <div class="bubble-content">
            降价的同时，请严把质量关。
            <div class="bubble-meta">来自微博用户</div>
          </div>
        </div>
  
        <div class="chat-bubble" data-scroll>
          <div class="user-avatar">😔</div>
          <div class="bubble-content">
            如果降价太夸张，企业没动力研发，结果可能适得其反。
            <div class="bubble-meta">来自微博用户</div>
          </div>
        </div>
  
        <div class="chat-bubble" data-scroll>
          <div class="user-avatar">💸</div>
          <div class="bubble-content">
            世上只有一种病——穷病。价格再降，对很多家庭还是难。
            <div class="bubble-meta">来自微博用户</div>
          </div>
        </div>
  
        <div class="chat-bubble" data-scroll>
          <div class="user-avatar">🧐</div>
          <div class="bubble-content">
            八毛钱十五片的降压药你敢吃吗？效果到底怎样？
            <div class="bubble-meta">来自微博用户</div>
          </div>
        </div>
  
        <div class="chat-bubble" data-scroll>
          <div class="user-avatar">😡</div>
          <div class="bubble-content">
            药价本来就虚高！暴利问题什么时候根治？
            <div class="bubble-meta">来自微博用户</div>
          </div>
        </div>
  
        <div class="chat-bubble" data-scroll>
          <div class="user-avatar">❓</div>
          <div class="bubble-content">
            只看价格不看疗效？老百姓有没有资格用原研药？
            <div class="bubble-meta">来自微博用户</div>
          </div>
        </div>
  
        <div class="chat-bubble" data-scroll>
          <div class="user-avatar">💔</div>
          <div class="bubble-content">
            医保里的药疗效一般，真遇到罕见病还是烧钱。
            <div class="bubble-meta">来自微博用户</div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- ========= /舆情聊天气泡 ========= -->
  
    <div class="network-card">
        <div class="header">
          <h1>“医保谈判”微博高频词共现网络（2018–2024）</h1>
          <p class="subtitle"></p>
          <div class="controls">
            <button class="net-btn net-btn-primary"    onclick="changeNetworkLayout('circular')">圆形布局</button>
            <button class="net-btn net-btn-secondary"  onclick="changeNetworkLayout('force')">力导向布局</button>
          </div>
        </div>
      
        <div id="networkVisualization">
          <!-- 图例 -->
          <div class="legend">
            <div class="legend-item"><div class="legend-color" style="background:#3b82f6"></div>政策核心</div>
            <div class="legend-item"><div class="legend-color" style="background:#f59e0b"></div>药品医疗</div>
            <div class="legend-item"><div class="legend-color" style="background:#10b981"></div>经济价格</div>
            <div class="legend-item"><div class="legend-color" style="background:#ec4899"></div>患者群体</div>
            <div class="legend-item"><div class="legend-color" style="background:#8b5cf6"></div>医药企业</div>
            <div class="legend-item"><div class="legend-color" style="background:#f97316"></div>医疗机构</div>
            <div class="legend-item"><div class="legend-color" style="background:#06b6d4"></div>正面情绪</div>
            <div class="legend-item"><div class="legend-color" style="background:#ef4444"></div>负面情绪</div>
            <div class="legend-item"><div class="legend-color" style="background:#6b7280"></div>中性分析</div>
            <div class="legend-item"><div class="legend-color" style="background:#84cc16"></div>地区相关</div>
          </div>
        </div>
        
      </div>
      <div class="story-container">
        <section class="story-paragraph1" data-scroll="keyword-explain">
          从 2018-2024 年的微博内容词频分析结果来看，公众对“医保谈判”的关注焦点高度集中。整体来看，“医保”与“谈判”结合“国家”或“政策”频共现，构成舆论表达的基本框架之一。<br><br>
          其中，“药品谈判”“谈判降价”“目录调整”等词频尤为突出，反映出公众对医保目录准入机制、价格谈判降价及药品覆盖范围的长期关注。“价格”“降幅”“成本”等与结果相关的高频词汇，体现了舆论对谈判成效、价格稳定与患者经济负担的持续追踪。<br><br>
          值得注意的是，“抗癌药”与“昂贵用药”等关键词频频出现，突显公众对重大疾病药物可及性的特别关切；而“企业”“专家”“医保方”等主体的高频同现，也反映出医保谈判作为一项政策行动，在持续推进中已形成政府、企业、媒体与公众多方互动博弈的错综结构，相关议题的可见性与公众参与度不断提高。
        </section>
      </div>
      <div class="network-tooltip"></div>
      </div>
      <div class="page-9" id="page9">
        <!-- 漂浮药品背景 -->
        <div class="floating-medicines">
            <div class="floating-medicine">💊</div>
            <div class="floating-medicine">🏥</div>
            <div class="floating-medicine">💉</div>
            <div class="floating-medicine">🩺</div>
            <div class="floating-medicine">💊</div>
            <div class="floating-medicine">🏥</div>
            <div class="floating-medicine">💉</div>
            <div class="floating-medicine">🩺</div>
        </div>

        <!-- 页面标题区域 -->
        <div class="page9-header">
            <h1 class="page9-title fade-in-element">哪些药品呼声最高？来自评论区的"民意清单"</h1>
            <div class="page9-intro fade-in-element">
                <p>医保谈判的每一次目录扩容，背后都是千万患者的期盼。</p>
                <p>我们对2024年谈判结束至今的社交平台评论进行了整理与统计，<br>识别出公众提及频次最高的药品关键词，并整理出呼声最强烈的几种药品，形成这份榜单：</p>
            </div>
        </div>

        

        <!-- 主要内容区域 -->
        <div class="content-wrapper">
            <!-- 药品展示卡片 -->
            <div class="medicine-showcase">
                <!-- 1. 阿基仑赛注射液 -->
                <div class="medicine-card" data-category="血液肿瘤">
                    <div class="medicine-header">
                        <div class="medicine-icon">🩸</div>
                        <div class="medicine-name">
                            <div class="medicine-title">阿基仑赛注射液</div>
                            <div class="medicine-category">CAR-T细胞治疗</div>
                        </div>
                    </div>
                    <div class="medicine-description">
                        用于治疗复发或难治性大B细胞淋巴瘤的CD19 CAR-T细胞治疗产品，通过基因改造患者T细胞特异性攻击表达CD19的恶性B细胞。中国首个上市的细胞治疗类产品。
                    </div>
                    <div class="medicine-stats">
                        <div class="urgency-level">
                            紧急程度
                            <div class="urgency-dots">
                                <span class="urgency-dot"></span>
                                <span class="urgency-dot"></span>
                                <span class="urgency-dot"></span>
                                <span class="urgency-dot"></span>
                                <span class="urgency-dot"></span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 2. 瑞基奥仑赛注射液 -->
               

                <!-- 3. 司美格鲁肽注射液 -->
                <div class="medicine-card" data-category="内分泌系统">
                    <div class="medicine-header">
                        <div class="medicine-icon">💉</div>
                        <div class="medicine-name">
                            <div class="medicine-title">司美格鲁肽注射液</div>
                            <div class="medicine-category">GLP-1受体激动剂</div>
                        </div>
                    </div>
                    <div class="medicine-description">
                        用于治疗2型糖尿病患者血糖控制和长期体重管理的长效GLP-1类似物，通过促进胰岛素分泌、延缓胃排空增加饱腹感实现降糖减重。
                    </div>
                    <div class="medicine-stats">
                        <div class="urgency-level">
                            紧急程度
                            <div class="urgency-dots">
                                <span class="urgency-dot"></span>
                                <span class="urgency-dot"></span>
                                <span class="urgency-dot"></span>
                                <span class="urgency-dot"></span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 4. VGR-R01基因治疗 -->
                <div class="medicine-card" data-category="罕见病治疗">
                    <div class="medicine-header">
                        <div class="medicine-icon">🧬</div>
                        <div class="medicine-name">
                            <div class="medicine-title">VGR-R01基因治疗</div>
                            <div class="medicine-category">基因治疗</div>
                        </div>
                    </div>
                    <div class="medicine-description">
                        针对特定基因缺陷疾病的创新基因治疗方案，通过基因编辑技术从根本上纠正疾病的遗传学缺陷，代表着医学前沿技术。
                    </div>
                    <div class="medicine-stats">
                        <div class="urgency-level">
                            紧急程度
                            <div class="urgency-dots">
                                <span class="urgency-dot"></span>
                                <span class="urgency-dot"></span>
                                <span class="urgency-dot"></span>
                                <span class="urgency-dot"></span>
                                <span class="urgency-dot"></span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 5. 177Lu-LNC1004注射液 -->
                <div class="medicine-card" data-category="肿瘤治疗">
                    <div class="medicine-header">
                        <div class="medicine-icon">☢️</div>
                        <div class="medicine-name">
                            <div class="medicine-title">177Lu-LNC1004注射液</div>
                            <div class="medicine-category">放射性药物</div>
                        </div>
                    </div>
                    <div class="medicine-description">
                        用于神经内分泌肿瘤治疗的放射性核素治疗药物，通过靶向特定受体递送放射性粒子精准杀灭肿瘤细胞。
                    </div>
                    <div class="medicine-stats">
                        <div class="urgency-level">
                            紧急程度
                            <div class="urgency-dots">
                                <span class="urgency-dot"></span>
                                <span class="urgency-dot"></span>
                                <span class="urgency-dot"></span>
                                <span class="urgency-dot"></span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 6. 丁苯酞胶囊 -->
                <div class="medicine-card" data-category="神经系统">
                    <div class="medicine-header">
                        <div class="medicine-icon">🧠</div>
                        <div class="medicine-name">
                            <div class="medicine-title">丁苯酞胶囊</div>
                            <div class="medicine-category">脑血管疾病治疗</div>
                        </div>
                    </div>
                    <div class="medicine-description">
                        用于治疗急性缺血性脑卒中和血管性痴呆的神经保护剂，通过改善脑血管循环、保护神经细胞功能缓解脑缺血症状。
                    </div>
                    <div class="medicine-stats">
                        <div class="urgency-level">
                            紧急程度
                            <div class="urgency-dots">
                                <span class="urgency-dot"></span>
                                <span class="urgency-dot"></span>
                                <span class="urgency-dot"></span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 7. 蓝岑口服液 -->
                <div class="medicine-card" data-category="血液系统">
                    <div class="medicine-header">
                        <div class="medicine-icon">💊</div>
                        <div class="medicine-name">
                            <div class="medicine-title">蓝岑口服液</div>
                            <div class="medicine-category">中成药</div>
                        </div>
                    </div>
                    <div class="medicine-description">
                        主要功效为清热解毒、利咽消肿，临床上常用于治疗急性咽炎、肺胃实热证所致的咽痛、咽干、咽部灼热等
                    </div>
                    <div class="medicine-stats">
                        <div class="urgency-level">
                            紧急程度
                            <div class="urgency-dots">
                                <span class="urgency-dot"></span>
                                <span class="urgency-dot"></span>
                                
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 8. 玛仕度肽注射液 -->
                <div class="medicine-card" data-category="内分泌系统">
                    <div class="medicine-header">
                        <div class="medicine-icon">🏥</div>
                        <div class="medicine-name">
                            <div class="medicine-title">玛仕度肽注射液</div>
                            <div class="medicine-category">多肽类药物</div>
                        </div>
                    </div>
                    <div class="medicine-description">
                        用于特定内分泌疾病治疗的创新多肽类药物，通过调节激素水平改善患者代谢功能和生活质量。
                    </div>
                    <div class="medicine-stats">
                        <div class="urgency-level">
                            紧急程度
                            <div class="urgency-dots">
                                <span class="urgency-dot"></span>
                                <span class="urgency-dot"></span>
                                <span class="urgency-dot"></span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 9. 辉瑞Paxlovid -->
                <div class="medicine-card" data-category="抗病毒治疗">
                    <div class="medicine-header">
                        <div class="medicine-icon">🦠</div>
                        <div class="medicine-name">
                            <div class="medicine-title">辉瑞Paxlovid</div>
                            <div class="medicine-category">新冠病毒治疗</div>
                        </div>
                    </div>
                    <div class="medicine-description">
                        用于治疗轻至中度新冠病毒感染高风险患者的口服抗病毒药物组合（奈玛特韦/利托那韦），通过阻断病毒3CL蛋白酶破坏病毒复制过程。
                    </div>
                    <div class="medicine-stats">
                        <div class="urgency-level">
                            紧急程度
                            <div class="urgency-dots">
                                <span class="urgency-dot"></span>
                                <span class="urgency-dot"></span>
                                <span class="urgency-dot"></span>
                                <span class="urgency-dot"></span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 10. 若欣林 -->
                <div class="medicine-card" data-category="精神神经系统">
                    <div class="medicine-header">
                        <div class="medicine-icon">🧘</div>
                        <div class="medicine-name">
                            <div class="medicine-title">若欣林</div>
                            <div class="medicine-category">抗抑郁药物</div>
                        </div>
                    </div>
                    <div class="medicine-description">
                        用于治疗重度抑郁症和广泛性焦虑症的新型缓释制剂抗抑郁药，通过双重机制调节神经递质改善患者情绪和认知功能。
                    </div>
                    <div class="medicine-stats">
                        <div class="urgency-level">
                            紧急程度
                            <div class="urgency-dots">
                                <span class="urgency-dot"></span>
                                <span class="urgency-dot"></span>
                                <span class="urgency-dot"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 结语区域 -->
            <div class="conclusion-section">
                <div class="conclusion-text">
                    这些药品，有的价格高昂、病种罕见，尚未纳入医保让家庭背负沉重经济压力；有的关乎儿童成长与慢性病长期治疗，代表着更广泛人群的基本医疗需求。<br>它们的名字背后，是一个个家庭等待转机的目光，也是制度进一步完善的方向。
                </div>
            </div>
        </div>
    </div>
  <!-- 一定要在这里确保已经引入 ECharts -->
 <!-- 第十页：留言板 -->
 <!-- ========== 第十页：留言板 ========== -->
 <div class="page-11" id="page11">
  <div class="page11-container">
      <div class="conclusion-content">
          <div class="conclusion-text-block">
              <p class="conclusion-paragraph fade-in-element">在公共政策的体系中，医保谈判是一张写满数字的表格，也是一纸托起生命的契约。七年来，谈判桌上的每一次砍价、每一次落签，都在缩短"生的希望"与"付得起"的距离。</p>
              
              <p class="conclusion-paragraph fade-in-element">从天价罕见病药与癌症靶向药，到慢性病与儿童用药，医保目录不断延展，其背后，是国家对基本医疗公平的持续推进。</p>
              
              <p class="conclusion-paragraph fade-in-element">但制度的进步，不意味着终点的抵达。因为，仍有一些药还在目录之外，仍有一些人还在等待。</p>
              
              <p class="conclusion-paragraph fade-in-element">与此同时，我们也关注到，一些声音在悄然浮现：当价格一降再降，疗效是否依旧？质量是否可控？那些写进目录的药，是否真的能用得上、用得好？</p>
              
              <p class="conclusion-paragraph fade-in-element">这些被低声提起的担忧，正是医保谈判步入深水区后，亟待回应的新问题。因此我们呼吁更多企业在降价的同时坚守疗效，让"进目录"的药，也真正"用得上"。</p>
              
          </div>
          
          <div class="call-to-action fade-in-element">
              <button class="voice-button" onclick="window.open('demo2.html', '_blank')">
                  留下你的声音
                  <span class="button-arrow">→</span>
              </button>
          </div>
      </div>
  </div>
</div>
  
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.4.3/echarts.min.js"></script>
  
  
  <script>
    // 简单音乐控制脚本
    (function() {
        'use strict';
        
        const musicBtn = document.getElementById('musicBtn');
        const backgroundMusic = document.getElementById('backgroundMusic');
        
        if (!musicBtn || !backgroundMusic) {
            console.warn('音乐控制组件未找到');
            return;
        }
        
        let isPlaying = false;
        
        // 音乐控制函数
        function toggleMusic() {
            if (!isPlaying) {
                // 开始播放
                backgroundMusic.muted = false;
                backgroundMusic.volume = 0.3;
                
                const playPromise = backgroundMusic.play();
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        isPlaying = true;
                        musicBtn.classList.add('playing');
                        musicBtn.title = '音乐播放中';
                        console.log('背景音乐开始播放');
                    }).catch(error => {
                        console.error('音乐播放失败:', error);
                    });
                }
            } else {
                // 暂停播放
                backgroundMusic.pause();
                isPlaying = false;
                musicBtn.classList.remove('playing');
                musicBtn.title = '开启背景音乐';
                console.log('背景音乐已暂停');
            }
        }
        
        // 按钮点击事件
        musicBtn.addEventListener('click', function() {
            // 点击反馈动画
            this.style.transform = 'scale(0.9)';
            setTimeout(() => {
                this.style.transform = '';
            }, 100);
            
            toggleMusic();
        });
        
        // 音频事件监听
        backgroundMusic.addEventListener('error', function(e) {
            console.error('音频加载错误:', e);
            musicBtn.style.display = 'none';
        });
        
        // 音频结束时重置状态（虽然是循环播放，但保险起见）
        backgroundMusic.addEventListener('ended', function() {
            isPlaying = false;
            musicBtn.classList.remove('playing');
        });
        
    })();
    </script>
    <script>
        // ================= 第2.5页独立JavaScript代码 =================
(function() {
    'use strict';
    
    console.log('第2.5页JavaScript开始加载');
    
    // 等待DOM加载完成
    function initPage25() {
        const medicineBox = document.getElementById('medicineBoxContainer');
        
        if (!medicineBox) {
            console.log('未找到药盒容器，延迟重试');
            setTimeout(initPage25, 500);
            return;
        }
        
        console.log('找到药盒容器，开始初始化');
        
        // 创建额外的粒子元素
        function createParticle() {
            const particle = document.createElement('div');
            particle.className = 'extra-particle';
            
            // 随机位置
            const randomX = Math.random() * 20 + 40; // 20%-80%
            const randomY = Math.random() * 40 + 30; // 30%-70%
            
            particle.style.cssText = `
                position: absolute;
                width: 12px;
                height: 12px;
                background: #f39c12;
                border-radius: 50%;
                top: ${randomY}%;
                left: ${randomX}%;
                opacity: 0;
                pointer-events: none;
                z-index: 1;
                animation: extraParticle ${2 + Math.random() * 2}s ease-out ${Math.random() * 2}s infinite;
            `;
            
            return particle;
        }
        
        // 延迟添加粒子（等药盒出现后）
        setTimeout(() => {
            if (medicineBox) {
                console.log('开始添加粒子效果');
                // 创建4-6个额外粒子
                const particleCount = 6 + Math.floor(Math.random() * 3);
                for (let i = 0; i < particleCount; i++) {
                    const particle = createParticle();
                    medicineBox.appendChild(particle);
                }
                console.log(`已添加 ${particleCount} 个粒子`);
            }
        }, 2500); // 等待药盒动画完成
        
        // 添加关键词交互效果
        setTimeout(() => {
            const keyword = document.querySelector('.keyword');
            if (keyword && !keyword.classList.contains('enhanced')) {
                keyword.classList.add('enhanced');
                console.log('添加关键词交互效果');
                
                // 鼠标悬停效果
                keyword.addEventListener('mouseenter', function() {
                    this.style.filter = 'drop-shadow(0 0 25px rgba(243, 156, 18, 0.8))';
                    this.style.transform = 'scale(1.05)';
                    this.style.transition = 'all 0.3s ease';
                });
                
                keyword.addEventListener('mouseleave', function() {
                    this.style.filter = 'drop-shadow(0 0 10px rgba(243, 156, 18, 0.3))';
                    this.style.transform = 'scale(1)';
                });
                
                // 点击效果
                keyword.addEventListener('click', function() {
                    this.style.animation = 'textGlow 1s ease-out';
                    setTimeout(() => {
                        this.style.animation = '';
                    }, 1000);
                });
            }
        }, 3000);
    }
    
    // 监听滚动，确保动画在合适时机触发
    function checkPage25InView() {
        const page25 = document.getElementById('page2-5');
        if (!page25) return false;
        
        const rect = page25.getBoundingClientRect();
        const windowHeight = window.innerHeight;
        
        // 当第2.5页进入视野时返回true
        return rect.top < windowHeight * 0.8 && rect.bottom > windowHeight * 0.2;
    }
    
    let page25Initialized = false;
    
    function handleScroll() {
        if (!page25Initialized && checkPage25InView()) {
            console.log('第2.5页进入视野，开始初始化');
            page25Initialized = true;
            initPage25();
        }
    }
    
    // 如果页面已经加载完成
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM加载完成，初始化第2.5页');
            setTimeout(initPage25, 100);
            
            // 添加滚动监听
            window.addEventListener('scroll', handleScroll);
            
            // 立即检查一次
            setTimeout(handleScroll, 500);
        });
    } else {
        // DOM已经加载完成
        console.log('DOM已加载，直接初始化第2.5页');
        setTimeout(initPage25, 100);
        
        // 添加滚动监听
        window.addEventListener('scroll', handleScroll);
        
        // 立即检查一次
        setTimeout(handleScroll, 500);
    }
    
    // 调试函数
    window.debugPage25 = function() {
        console.log('=== 第2.5页调试信息 ===');
        console.log('- 药盒容器:', document.getElementById('medicineBoxContainer'));
        console.log('- 粒子数量:', document.querySelectorAll('.extra-particle').length);
        console.log('- 关键词元素:', document.querySelector('.keyword'));
        console.log('- 页面初始化状态:', page25Initialized);
        console.log('- 当前是否在视野内:', checkPage25InView());
    };
    
})();
        // 第五页流程图函数 - 放在全局作用域最前面
        const stageDetails = {
            1: {
                title: "准备阶段",
                time: "5月-6月",
                items: [
                    {
                        title: "制定工作方案",
                        description: "确定年度医保目录调整的总体方案和具体实施计划"
                    },
                    {
                        title: "完善谈判规则",
                        description: "制定和完善药品续订、新增等各类谈判规则"
                    },
                    {
                        title: "优化信息系统",
                        description: "升级完善申报和评审相关的信息化系统"
                    }
                ]
            },
            2: {
                title: "申报阶段",
                time: "7月-8月",
                items: [
                    {
                        title: "企业提交材料",
                        description: "医药企业按要求提交药品申报相关材料"
                    },
                    {
                        title: "形式审查",
                        description: "对企业提交的申报材料进行形式审查"
                    },
                    {
                        title: "公示复核",
                        description: "公示审查结果，进行复核，并将结果反馈给企业"
                    }
                ]
            },
            3: {
                title: "专家评审",
                time: "8月-9月",
                items: [
                    {
                        title: "组织联合评审",
                        description: "组织医学、药学、经济学等领域专家开展联合评审"
                    },
                    {
                        title: "系统化评估",
                        description: "对药品的安全性、有效性、经济性进行综合评估"
                    },
                    {
                        title: "反馈评审结果",
                        description: "通过申报系统向企业反馈专家评审结果"
                    }
                ]
            },
            4: {
                title: "谈判/竞价",
                time: "9月-10月",
                items: [
                    {
                        title: "提交谈判材料",
                        description: "组织企业提交谈判或竞价相关材料"
                    },
                    {
                        title: "支付标准测算",
                        description: "开展支付标准测算评估，确定合理价格区间"
                    },
                    {
                        title: "现场谈判",
                        description: "开展现场谈判或竞价，协商确定最终价格"
                    },
                    {
                        title: "签署协议",
                        description: "组织通过谈判的企业签署相关协议"
                    }
                ]
            },
            5: {
                title: "公布结果",
                time: "11月",
                items: [
                    {
                        title: "印发调整文件",
                        description: "正式印发关于医保目录调整的相关文件"
                    },
                    {
                        title: "公布调整结果",
                        description: "向社会公布药品目录调整的具体结果"
                    },
                    {
                        title: "发布新版目录",
                        description: "发布新版国家基本医疗保险药品目录"
                    }
                ]
            }
        };
        
        // 显示详细信息的主要函数 - 全局函数
        function showDetails(stageNumber) {
            console.log('点击了按钮:', stageNumber); // 调试用
            
            const panel = document.getElementById('details-panel');
            const content = document.getElementById('details-content');
            const stage = stageDetails[stageNumber];

            if (!panel || !content) {
                console.error('找不到面板元素');
                return;
            }

            // 如果点击的是当前显示的阶段，则关闭面板
            if (panel.classList.contains('active') && panel.dataset.currentStage == stageNumber) {
                panel.classList.remove('active');
                // 重置所有节点样式
                document.querySelectorAll('.step-node').forEach(node => {
                    node.style.transform = '';
                    node.style.zIndex = '';
                });
                return;
            }

            // 生成详细内容HTML
            let itemsHtml = '';
            stage.items.forEach(item => {
                itemsHtml += `
                    <div class="detail-item">
                        <h4>${item.title}</h4>
                        <p>${item.description}</p>
                    </div>
                `;
            });

            // 设置面板内容
            content.innerHTML = `
                <div class="details-title">
                    ${stage.title}
                    <div class="details-time">${stage.time}</div>
                </div>
                <div class="details-content">
                    ${itemsHtml}
                </div>
            `;

            // 显示面板
            panel.classList.add('active');
            panel.dataset.currentStage = stageNumber;

            // 高亮当前选中的节点
            document.querySelectorAll('.step-node').forEach(node => {
                node.style.transform = '';
                node.style.zIndex = '';
            });
            
            const currentNode = document.querySelector(`.step-${stageNumber}`);
            if (currentNode) {
                currentNode.style.transform = 'scale(1.15)';
                currentNode.style.zIndex = '10';
            }
        }
        // 在 DOMContentLoaded 里或合适的位置添加
        

        // 谈判语录数据
        const quotes = [
            '"3块钱一片，一天两片就是6块钱。患者需要长期服药，是持续的，这笔账必须算清楚。"',
            '"2块4毛3，能看出你们的诚意。"',
            '"我们专家组也回个价，2块1毛1。"'
        ];

        let quoteIndex = 0;
        let sceneTextIndex = 0;
        // 创建语录气泡
        function createQuoteBubble(quote, delay = 0) {
            setTimeout(() => {
                const container = document.getElementById('quotesContainer');
                const bubble = document.createElement('div');
                bubble.className = 'quote-bubble price';
                bubble.textContent = quote;
                
                container.appendChild(bubble);
                
                // 显示动画
                setTimeout(() => {
                    bubble.classList.add('show');
                }, 100);
                
            }, delay);
        }

        // 显示场景描述文字
        function showSceneText() {
            const sceneTexts = document.querySelectorAll('.scene-text');
            sceneTexts.forEach((text, index) => {
                setTimeout(() => {
                    text.classList.add('show');
                }, index * 300);
            });
        }

        // 滚动到第五页时的触发效果
        function triggerPage5Effects() {
            const page5 = document.getElementById('page5');
            if (page5) {
                console.log('第五页已进入视野');
                
                // 重新触发路径绘制动画
                const pathLine = page5.querySelector('.path-line');
                if (pathLine) {
                    pathLine.style.animation = 'none';
                    setTimeout(() => {
                        pathLine.style.animation = 'drawPath 4s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards';
                    }, 100);
                }
            }
        }
        let page6TextIndex = 0;

// 显示第六页文字的函数
        function showPage6Text() {
            const page6Texts = document.querySelectorAll('.page6-text');
            page6Texts.forEach((text, index) => {
                setTimeout(() => {
                    text.classList.add('show');
                }, index * 200); // 每个文字间隔200ms显示
            });
}

        // 滚动监听
        window.addEventListener('scroll', function() {
            const page1 = document.getElementById('page1');
            const page2 = document.getElementById('page2');
            const page3 = document.getElementById('page3');
            const page4 = document.getElementById('page4');
            const page5 = document.getElementById('page5');
            const scrollTop = window.pageYOffset;
            const windowHeight = window.innerHeight;
            
            // 第一页抽屉效果
            const drawerTrigger = windowHeight * 0.2;
            const drawerComplete = windowHeight * 0.8;
            
            if (scrollTop <= drawerTrigger) {
                page1.style.display = 'flex';
                page1.style.transform = 'translateY(0)';
                page1.style.opacity = '1';
            } else if (scrollTop >= drawerComplete) {
                page1.style.display = 'none';
            } else {
                page1.style.display = 'flex';
                const progress = (scrollTop - drawerTrigger) / (drawerComplete - drawerTrigger);
                const translateY = -100 * progress;
                page1.style.transform = `translateY(${translateY}%)`;
                page1.style.opacity = Math.max(0, 1 - progress * 1.5);
            }
            
            // 第二页语录显示
            if (page2) {
                const page2Top = page2.offsetTop - windowHeight;
                const page2Bottom = page2.offsetTop + page2.offsetHeight;
                
                if (scrollTop > page2Top && scrollTop < page2Bottom) {
                    const scrollProgress = (scrollTop - page2Top) / page2.offsetHeight;
                    
                    // 依次显示语录，间隔更大避免重叠
                    if (scrollProgress > 0.15 && quoteIndex === 0) {
                        createQuoteBubble(quotes[0], 0);
                        quoteIndex = 1;
                    }
                    if (scrollProgress > 0.25 && quoteIndex === 1) {
                        createQuoteBubble(quotes[1], 500);
                        quoteIndex = 2;
                    }
                    if (scrollProgress > 0.35 && quoteIndex === 2) {
                        createQuoteBubble(quotes[2], 1000);
                        quoteIndex = 3;
                    }
                    
                    // 显示场景描述
                    if (scrollProgress > 0.55 && sceneTextIndex === 0) {
                        showSceneText();
                        sceneTextIndex = 1;
                    }
                }
            }
            
            // 第三页内容淡入
            if (page3) {
                const page3Top = page3.offsetTop;
                const page3Elements = page3.querySelectorAll('.fade-in-element');
                
                if (scrollTop > page3Top - windowHeight * 0.8) {
                    page3Elements.forEach((element, index) => {
                        setTimeout(() => {
                            element.classList.add('show');
                        }, index * 300);
                    });
                }
            }

            // 第四页逐个展示药品效果
            if (page4) {
                const page4Top = page4.offsetTop;
                const page4Height = page4.offsetHeight;
                const titleElement = page4.querySelector('.section-title');
                
                if (scrollTop > page4Top - windowHeight && scrollTop < page4Top + page4Height - windowHeight) {
                    const relativeScroll = scrollTop - page4Top + windowHeight;
                    const progress = Math.min(relativeScroll / page4Height, 1);
                    
                    // 显示标题
                    if (progress > 0.05) {
                        titleElement.classList.add('show');
                    }
                    
                    // 控制三个药品卡片的显示
                    const drug1 = document.getElementById('drug1');
                    const drug2 = document.getElementById('drug2');
                    const drug3 = document.getElementById('drug3');
                    
                    if (drug1 && drug2 && drug3) {
                        // 重置所有状态
                        [drug1, drug2, drug3].forEach(drug => {
                            drug.classList.remove('active', 'exit-up');
                        });
                        
                        // 第一个药品 (10%-40%)
                        if (progress >= 0.1 && progress < 0.4) {
                            drug1.classList.add('active');
                        }
                        // 第二个药品 (40%-70%)
                        else if (progress >= 0.4 && progress < 0.7) {
                            drug2.classList.add('active');
                        }
                        // 第三个药品 (70%-95%)
                        else if (progress >= 0.7 && progress < 0.95) {
                            drug3.classList.add('active');
                        }
                    }
                } else {
                    // 重置状态
                    const titleElement = page4.querySelector('.section-title');
                    if (titleElement) titleElement.classList.remove('show');
                    
                    const drug1 = document.getElementById('drug1');
                    const drug2 = document.getElementById('drug2');
                    const drug3 = document.getElementById('drug3');
                    if (drug1 && drug2 && drug3) {
                        [drug1, drug2, drug3].forEach(drug => {
                            drug.classList.remove('active', 'exit-up');
                        });
                    }
                }
            }

            // 第五页效果
            // 第五页效果
            if (page5) {
                const page5Top = page5.offsetTop;
                if (scrollTop > page5Top - windowHeight * 0.8) {
                    triggerPage5Effects();
                }
            }

            // 第六页文字动画
            const page6 = document.getElementById('page6');
            if (page6) {
                const page6Top = page6.offsetTop;
                const page6Height = page6.offsetHeight;
                
                if (scrollTop > page6Top - windowHeight * 0.8 && scrollTop < page6Top + page6Height) {
                    const relativeScroll = scrollTop - page6Top + windowHeight * 0.8;
                    const progress = Math.min(relativeScroll / (page6Height * 0.6), 1);
                    
                    // 触发文字动画（只执行一次）
                    if (progress > 0.1 && page6TextIndex === 0) {
                        showPage6Text();
                        page6TextIndex = 1;
                    }
                }
            }
        });
        
        // 页面加载完成后的初始化
        document.addEventListener('DOMContentLoaded', function() {
            console.log('页面已加载，初始化流程图');
            
            // 平滑滚动
            const scrollHint = document.querySelector('.scroll-hint');
            if (scrollHint) {
                scrollHint.addEventListener('click', function() {
                    const page2 = document.getElementById('page2');
                    if (page2) {
                        page2.scrollIntoView({
                            behavior: 'smooth'
                        });
                    }
                });
            }

            // 确保所有节点都有点击事件
            document.querySelectorAll('.step-node').forEach((node, index) => {
                node.addEventListener('click', function() {
                    const stageNumber = index + 1;
                    showDetails(stageNumber);
                });
            });
        });

        // 键盘导航支持
        document.addEventListener('keydown', function(e) {
            if (e.key >= '1' && e.key <= '5') {
                const stageNumber = parseInt(e.key);
                showDetails(stageNumber);
                e.preventDefault();
            }
            
            // ESC键关闭面板
            if (e.key === 'Escape') {
                const panel = document.getElementById('details-panel');
                if (panel && panel.classList.contains('active')) {
                    panel.classList.remove('active');
                    document.querySelectorAll('.step-node').forEach(node => {
                        node.style.transform = '';
                        node.style.zIndex = '';
                    });
                }
            }
        });

        // 移动端触摸优化
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.step-node').forEach(node => {
                // 触摸开始
                node.addEventListener('touchstart', function(e) {
                    this.style.transform = 'scale(1.05)';
                    e.preventDefault();
                });
                
                // 触摸结束
                node.addEventListener('touchend', function(e) {
                    setTimeout(() => {
                        if (!this.style.zIndex || this.style.zIndex !== '10') {
                            this.style.transform = '';
                        }
                    }, 200);
                    e.preventDefault();
                });
                
                // 触摸取消
                node.addEventListener('touchcancel', function() {
                    setTimeout(() => {
                        if (!this.style.zIndex || this.style.zIndex !== '10') {
                            this.style.transform = '';
                        }
                    }, 200);
                });
            });
        });

        // 点击面板外部关闭面板
        document.addEventListener('click', function(e) {
            const panel = document.getElementById('details-panel');
            const roadmapContainer = document.querySelector('.page-5 .roadmap-container');
            
            if (panel && panel.classList.contains('active') && roadmapContainer) {
                if (!roadmapContainer.contains(e.target)) {
                    panel.classList.remove('active');
                    document.querySelectorAll('.step-node').forEach(node => {
                        node.style.transform = '';
                        node.style.zIndex = '';
                    });
                }
            }
        });

        // 调试函数
        function debugPage5() {
            console.log('第五页调试信息：');
            console.log('- stageDetails:', stageDetails);
            console.log('- details-panel元素:', document.getElementById('details-panel'));
            console.log('- step-node元素数量:', document.querySelectorAll('.step-node').length);
            
            setTimeout(() => {
                showDetails(1);
            }, 1000);
        }
    </script>

     <!-- 第六页渲染与滚动触发脚本 -->
     <script>
       // 1. 把图表初始化逻辑封装成一个函数
       function renderChart() {
         const medicalData = {
           years: ['2018','2019','2020','2021','2022','2023','2024'],
           negotiation: [18,150,162,117,147,143,117],
           success:     [17, 97,119, 94,121,121, 89],
           reduction:   [57, 61, 51, 62, 60, 62, 63]
         };
         const successRate = medicalData.years.map((_, i) =>
           Math.round(medicalData.success[i] / medicalData.negotiation[i] * 100)
         );
   
         const chart = echarts.init(document.getElementById('chart'));
         const option = {
           title: {
             text: '医保谈判成效数据概览（2018—2024）',
             left: 'center',
             textStyle: { fontSize: 20, fontWeight: 600 },
             subtextStyle: { fontSize: 14, color: '#666' }
           },
           color: ['#afd3e7','#fca3a3','#fdcd8c','#d0bbdb'],
           tooltip: { trigger: 'axis', axisPointer: { type: 'shadow' } },
           legend: { data: ['谈判数','成功数','成功率','降价幅度'], top: '10%' },
           grid: { left: '8%', right: '8%', bottom: '15%', containLabel: true },
           xAxis: [{ type: 'category', data: medicalData.years, axisLine: { lineStyle: { color: '#ccc' } }, axisLabel: { fontSize: 12 } }],
           yAxis: [
             { type: 'value', name: '数量', axisLine: { lineStyle: { color: '#afd3e7' } }, axisLabel: { formatter: '{value}', fontSize: 12 } },
             { type: 'value', name: '百分比(%)', position: 'right', axisLine: { lineStyle: { color: '#fdcd8c' } }, axisLabel: { formatter: '{value}%', fontSize: 12 } }
           ],
           series: [
             {
               name: '谈判数',
               type: 'bar',
               data: medicalData.negotiation,
               itemStyle: { borderRadius: [4,4,0,0] },
               animationDuration: 2000,
               animationEasing: 'cubicOut'
             },
             {
               name: '成功数',
               type: 'bar',
               data: medicalData.success,
               itemStyle: { borderRadius: [4,4,0,0] },
               animationDuration: 2000,
               animationEasing: 'cubicOut'
             },
             {
               name: '成功率',
               type: 'line',
               yAxisIndex: 1,
               data: successRate,
               smooth: true,
               connectNulls: true,
               lineStyle: { width: 3 },
               symbol: 'circle',
               symbolSize: 8,
               animationDuration: 2400,
               animationEasing: 'cubicOut'
             },
             {
               name: '降价幅度',
               type: 'line',
               yAxisIndex: 1,
               data: medicalData.reduction,
               smooth: true,
               connectNulls: true,
               lineStyle: { width: 3, type: 'dashed' },
               symbol: 'diamond',
               symbolSize: 8,
               animationDuration: 2400,
               animationEasing: 'cubicOut'
             }
           ]
         };
   
         chart.setOption(option);
         window.addEventListener('resize', () => chart.resize());
       }
       // 第七页相关变量
        let page7Initialized = false;
        let bubbleChartInstance = null;

        // 第七页初始化函数
        function initPage7() {
            if (page7Initialized) return;
            
            // 添加渐进显示效果
            const page7Elements = document.querySelectorAll('.page-7 .fade-in-element');
            page7Elements.forEach((element, index) => {
                setTimeout(() => {
                    element.classList.add('show');
                }, index * 200);
            });
            
            // 初始化扑克牌交互
            initPokerCards();
            
            // 延迟加载气泡图
            setTimeout(() => {
                initBubbleChart();
            }, 1500);
            
            page7Initialized = true;
        }

        // 扑克牌交互功能
        function initPokerCards() {
            const pokerCards = document.querySelectorAll('.poker-card');
            
            pokerCards.forEach(card => {
                // 点击翻转功能（移动端友好）
                card.addEventListener('click', function(e) {
                    e.preventDefault();
                    const cardInner = this.querySelector('.card-inner');
                    cardInner.style.transform = 
                        cardInner.style.transform === 'rotateY(180deg)' 
                        ? 'rotateY(0deg)' 
                        : 'rotateY(180deg)';
                });
                
                // 鼠标进入时添加动画类
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-10px)';
                });
                
                // 鼠标离开时移除动画类
                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0)';
                });
            });
            
            // 添加键盘支持
            document.addEventListener('keydown', function(e) {
                if (e.key >= '1' && e.key <= '4') {
                    const cardIndex = parseInt(e.key) - 1;
                    const card = pokerCards[cardIndex];
                    if (card) {
                        const cardInner = card.querySelector('.card-inner');
                        cardInner.style.transform = 
                            cardInner.style.transform === 'rotateY(180deg)' 
                            ? 'rotateY(0deg)' 
                            : 'rotateY(180deg)';
                    }
                }
            });
        }

        // 初始化气泡图
        function initBubbleChart() {
            const chartDom = document.getElementById('bubbleChart');
            if (!chartDom) return;
            
            bubbleChartInstance = echarts.init(chartDom);
            
            // 数据准备
            const years = ['2018', '2019', '2020', '2021', '2022', '2023', '2024'];
            const categories = ['癌症治疗药物', '罕见病药物', '慢性病管理药物', '其他药物'];
            
            const colors = {
                '癌症治疗药物': '#ed5f5f',
                '罕见病药物': '#53a8e1',
                '慢性病管理药物': '#ffa74f',
                '其他药物': '#9a72c7'
            };
            
            const data = {
                '癌症治疗药物': [ 17, 21, 18, 23, 24, 21, 26],
                '罕见病药物': [ 0, 13, 10, 7, 7, 15, 13],
                '慢性病管理药物': [ 0, 25, 38, 42, 52, 35, 19],
                '其他药物': [0, 38, 53, 22, 38, 50, 31]
            };
            
            // 转换数据格式
            const series = [];
            Object.keys(data).forEach((category, categoryIndex) => {
                const seriesData = data[category].map((value, yearIndex) => {
                    return [yearIndex, categoryIndex, value];
                });
                
                series.push({
                    name: category,
                    type: 'scatter',
                    symbolSize: function (val) {
                        return Math.max(15, Math.min(80, val[2] * 1.5));
                    },
                    data: seriesData,
                    itemStyle: {
                        color: colors[category],
                        opacity: 0.8
                    },
                    emphasis: {
                        itemStyle: {
                            opacity: 1,
                            shadowBlur: 20,
                            shadowColor: 'rgba(0, 0, 0, 0.3)'
                        },
                        label: {
                            show: true,
                            formatter: function(param) {
                                return param.value[2] + '种';
                            },
                            position: 'top',
                            fontSize: 14,
                            fontWeight: 'bold'
                        }
                    },
                    animationDelay: function (idx) {
                        return idx * 50;
                    }
                });
            });
            
            const option = {
                backgroundColor: 'transparent',
                title: {
                    show: false
                },
                legend: {
                    data: categories,
                    top: '5%',
                    itemGap: 20,
                    textStyle: {
                        fontSize: 14,
                        color: '#333'
                    },
                    icon: 'circle'
                },
                grid: {
                    left: '5%',
                    right: '5%',
                    bottom: '10%',
                    top: '15%',
                    containLabel: true
                },
                tooltip: {
                    trigger: 'item',
                    formatter: function (params) {
                        return `<div style="padding: 10px;">
                            <strong>${params.seriesName}</strong><br/>
                            年份：${years[params.value[0]]}<br/>
                            数量：<strong style="color: ${colors[params.seriesName]}">${params.value[2]} 种</strong>
                        </div>`;
                    },
                    backgroundColor: 'rgba(255, 255, 255, 0.95)',
                    borderColor: '#ddd',
                    borderWidth: 1,
                    textStyle: {
                        color: '#333'
                    },
                    extraCssText: 'box-shadow: 0 4px 12px rgba(0,0,0,0.15);'
                },
                xAxis: {
                    type: 'category',
                    data: years,
                    boundaryGap: true,
                    splitLine: {
                        show: false
                    },
                    axisLine: {
                        lineStyle: {
                            color: '#ccc'
                        }
                    },
                    axisLabel: {
                        fontSize: 12,
                        color: '#666',
                        interval: 0
                    }
                },
                yAxis: {
                    type: 'category',
                    data: categories,
                    boundaryGap: true,
                    splitLine: {
                        show: true,
                        lineStyle: {
                            type: 'dashed',
                            color: '#e8e8e8'
                        }
                    },
                    axisLine: {
                        lineStyle: {
                            color: '#ccc'
                        }
                    },
                    axisLabel: {
                        fontSize: 12,
                        color: '#666'
                    }
                },
                series: series,
                animationEasing: 'elasticOut',
                animationDuration: 2000
            };
            
            bubbleChartInstance.setOption(option);
            
            // 响应式调整
            window.addEventListener('resize', () => {
                if (bubbleChartInstance) {
                    bubbleChartInstance.resize();
                }
            });
            
            // 添加交互效果
            bubbleChartInstance.on('click', function(params) {
                highlightCategory(params.seriesName);
            });
        }

        // 高亮对应类别的统计段落
        function highlightCategory(category) {
            const categoryMap = {
                '癌症治疗药物': 'cancer',
                '慢性病管理药物': 'chronic',
                '罕见病药物': 'rare',
                '其他药物': 'other'
            };
            
            const targetCategory = categoryMap[category];
            if (!targetCategory) return;
            
            // 高亮对应的扑克牌
            const targetCard = document.querySelector(`.poker-card[data-category="${targetCategory}"]`);
            if (targetCard) {
                targetCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
                
                // 添加闪烁效果
                targetCard.classList.add('highlight-flash');
                setTimeout(() => {
                    targetCard.classList.remove('highlight-flash');
                }, 2000);
            }
            
            // 高亮对应的统计段落
            const targetParagraph = document.querySelector(`.stat-paragraph[data-category="${targetCategory}"]`);
            if (targetParagraph) {
                targetParagraph.style.background = 'linear-gradient(135deg, #fff5f5, #fff)';
                targetParagraph.style.transform = 'scale(1.02)';
                
                setTimeout(() => {
                    targetParagraph.style.background = '';
                    targetParagraph.style.transform = '';
                }, 2000);
            }
        }

        // 添加第七页的滚动监听
        window.addEventListener('scroll', function() {
            const page7 = document.getElementById('page7');
            if (!page7) return;
            
            const page7Top = page7.offsetTop;
            const scrollTop = window.pageYOffset;
            const windowHeight = window.innerHeight;
            
            // 当滚动到第七页时初始化
            if (scrollTop > page7Top - windowHeight * 0.8 && !page7Initialized) {
                initPage7();
            }
        });

        // 添加闪烁动画样式
        const style = document.createElement('style');
        style.textContent = `
            @keyframes highlightFlash {
                0%, 100% { 
                    transform: scale(1);
                    box-shadow: 0 10px 30px rgba(0,0,0,0.15);
                }
                50% { 
                    transform: scale(1.05);
                    box-shadow: 0 15px 40px rgba(255, 140, 0, 0.4);
                }
            }
            
            .poker-card.highlight-flash {
                animation: highlightFlash 0.6s ease-in-out 3;
            }
        `;
        document.head.appendChild(style);

        // 添加触摸支持（移动端）
        if ('ontouchstart' in window) {
            document.querySelectorAll('.poker-card').forEach(card => {
                let touchStartX = 0;
                let touchEndX = 0;
                
                card.addEventListener('touchstart', function(e) {
                    touchStartX = e.changedTouches[0].screenX;
                });
                
                card.addEventListener('touchend', function(e) {
                    touchEndX = e.changedTouches[0].screenX;
                    
                    // 如果是轻触而非滑动，则翻转卡片
                    if (Math.abs(touchEndX - touchStartX) < 50) {
                        const cardInner = this.querySelector('.card-inner');
                        cardInner.style.transform = 
                            cardInner.style.transform === 'rotateY(180deg)' 
                            ? 'rotateY(0deg)' 
                            : 'rotateY(180deg)';
                    }
                });
            });
        }

        // 调试函数
        function debugPage7() {
            console.log('第七页调试信息：');
            console.log('- 初始化状态:', page7Initialized);
            console.log('- 扑克牌数量:', document.querySelectorAll('.poker-card').length);
            console.log('- 气泡图实例:', bubbleChartInstance);
            
            // 手动触发初始化
            initPage7();
        }
        

        const observerOptions = {
    threshold: 0.3,
    rootMargin: '0px 0px -100px 0px'
  };
  const scrollObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('show');
      }
    });
  }, observerOptions);

  document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('[data-scroll]').forEach(el => scrollObserver.observe(el));
    // 先触发标题和副标题
    setTimeout(() => {
      document.querySelector('[data-scroll="title"]').classList.add('show');
      setTimeout(() => {
        document.querySelector('[data-scroll="subtitle"]').classList.add('show');
      }, 300);
    }, 500);
  });

  // —— 2. ECharts 舆情动态 初始化 —— 
  function initChart() {
    console.log('开始初始化图表...');
    
    const chartDom = document.getElementById('main');
    if (!chartDom) {
        console.error('找不到图表容器 #main');
        return;
    }
    
    // 确保容器有高度
    if (chartDom.offsetHeight === 0) {
        console.warn('图表容器高度为0，设置默认高度');
        chartDom.style.height = '800px';
    }
    
    const myChart = echarts.init(chartDom);
    
    console.log('ECharts实例创建成功');
    const updateFrequency = 4000;
    const emotionColors = {
      '积极支持': '#53a8e1',
      '理性认可': '#afd3e7',
      '感恩情绪': '#fdcd8c',
      '担忧质疑': '#fca3a3',
      '不满抱怨': '#ed5f5f',
      '愤怒反对': '#ffa74f',
      '中性表达': '#d0bbdb'
    };

    // —— 完整 21 个时期的数据 —— 
    const timelineData = [
      { time: '2018年谈判前', data: [
          { emotion: '中性表达', percentage: 70.7 },
          { emotion: '积极支持', percentage: 14.7 },
          { emotion: '理性认可', percentage: 10.3 },
          { emotion: '感恩情绪', percentage: 2.8  },
          { emotion: '不满抱怨', percentage: 1.1  },
          { emotion: '担忧质疑', percentage: 0.4  },
          { emotion: '愤怒反对', percentage: 0.0  }
        ]
      },
      { time: '2018年谈判期间', data: [
          { emotion: '积极支持', percentage: 46.6 },
          { emotion: '中性表达', percentage: 45.4 },
          { emotion: '理性认可', percentage: 3.5  },
          { emotion: '感恩情绪', percentage: 3.5  },
          { emotion: '担忧质疑', percentage: 0.8  },
          { emotion: '不满抱怨', percentage: 0.1  },
          { emotion: '愤怒反对', percentage: 0.1  }
        ]
      },
      { time: '2018年谈判后', data: [
          { emotion: '中性表达', percentage: 70.1 },
          { emotion: '积极支持', percentage: 26.1 },
          { emotion: '理性认可', percentage: 2.9  },
          { emotion: '感恩情绪', percentage: 0.8  },
          { emotion: '担忧质疑', percentage: 0.2  },
          { emotion: '不满抱怨', percentage: 0.0  },
          { emotion: '愤怒反对', percentage: 0.0  }
        ]
      },
      { time: '2019年谈判前', data: [
          { emotion: '中性表达', percentage: 88.8 },
          { emotion: '理性认可', percentage: 4.2  },
          { emotion: '积极支持', percentage: 3.8  },
          { emotion: '感恩情绪', percentage: 1.4  },
          { emotion: '愤怒反对', percentage: 1.0  },
          { emotion: '担忧质疑', percentage: 0.7  },
          { emotion: '不满抱怨', percentage: 0.1  }
        ]
      },
      { time: '2019年谈判期间', data: [
          { emotion: '中性表达', percentage: 84.6 },
          { emotion: '积极支持', percentage: 8.3  },
          { emotion: '理性认可', percentage: 6.7  },
          { emotion: '感恩情绪', percentage: 0.4  },
          { emotion: '担忧质疑', percentage: 0.0  },
          { emotion: '不满抱怨', percentage: 0.0  },
          { emotion: '愤怒反对', percentage: 0.0  }
        ]
      },
      { time: '2019年谈判后', data: [
          { emotion: '中性表达', percentage: 57.2 },
          { emotion: '积极支持', percentage: 33.0 },
          { emotion: '理性认可', percentage: 5.5  },
          { emotion: '感恩情绪', percentage: 3.6  },
          { emotion: '担忧质疑', percentage: 0.6  },
          { emotion: '不满抱怨', percentage: 0.1  },
          { emotion: '愤怒反对', percentage: 0.1  }
        ]
      },
      { time: '2020年谈判前', data: [
          { emotion: '中性表达', percentage: 57.8 },
          { emotion: '积极支持', percentage: 25.4 },
          { emotion: '理性认可', percentage: 13.3 },
          { emotion: '担忧质疑', percentage: 3.4  },
          { emotion: '愤怒反对', percentage: 0.2  },
          { emotion: '感恩情绪', percentage: 0.0  },
          { emotion: '不满抱怨', percentage: 0.0  }
        ]
      },
      { time: '2020年谈判期间', data: [
          { emotion: '中性表达', percentage: 64.6 },
          { emotion: '积极支持', percentage: 24.2 },
          { emotion: '理性认可', percentage: 8.8  },
          { emotion: '感恩情绪', percentage: 1.0  },
          { emotion: '担忧质疑', percentage: 1.0  },
          { emotion: '不满抱怨', percentage: 0.3  },
          { emotion: '愤怒反对', percentage: 0.0  }
        ]
      },
      { time: '2020年谈判后', data: [
          { emotion: '积极支持', percentage: 51.0 },
          { emotion: '中性表达', percentage: 41.8 },
          { emotion: '理性认可', percentage: 4.1  },
          { emotion: '担忧质疑', percentage: 2.5  },
          { emotion: '感恩情绪', percentage: 0.5  },
          { emotion: '愤怒反对', percentage: 0.1  },
          { emotion: '不满抱怨', percentage: 0.0  }
        ]
      },
      { time: '2021年谈判前', data: [
          { emotion: '中性表达', percentage: 64.5 },
          { emotion: '积极支持', percentage: 24.4 },
          { emotion: '理性认可', percentage: 10.0 },
          { emotion: '担忧质疑', percentage: 0.6  },
          { emotion: '感恩情绪', percentage: 0.2  },
          { emotion: '愤怒反对', percentage: 0.2  },
          { emotion: '不满抱怨', percentage: 0.0  }
        ]
      },
      { time: '2021年谈判期间', data: [
          { emotion: '中性表达', percentage: 64.2 },
          { emotion: '积极支持', percentage: 25.6 },
          { emotion: '理性认可', percentage: 7.8  },
          { emotion: '担忧质疑', percentage: 1.3  },
          { emotion: '感恩情绪', percentage: 0.8  },
          { emotion: '不满抱怨', percentage: 0.3  },
          { emotion: '愤怒反对', percentage: 0.0  }
        ]
      },
      { time: '2021年谈判后', data: [
          { emotion: '中性表达', percentage: 43.3 },
          { emotion: '积极支持', percentage: 34.6 },
          { emotion: '理性认可', percentage: 11.7 },
          { emotion: '感恩情绪', percentage: 9.3  },
          { emotion: '担忧质疑', percentage: 0.9  },
          { emotion: '不满抱怨', percentage: 0.2  },
          { emotion: '愤怒反对', percentage: 0.0  }
        ]
      },
      { time: '2022年谈判前', data: [
          { emotion: '理性认可', percentage: 37.7 },
          { emotion: '中性表达', percentage: 31.7 },
          { emotion: '积极支持', percentage: 20.9 },
          { emotion: '担忧质疑', percentage: 5.8  },
          { emotion: '感恩情绪', percentage: 3.1  },
          { emotion: '不满抱怨', percentage: 0.8  },
          { emotion: '愤怒反对', percentage: 0.0  }
        ]
      },
      { time: '2022年谈判期间', data: [
          { emotion: '中性表达', percentage: 56.9 },
          { emotion: '理性认可', percentage: 21.0 },
          { emotion: '积极支持', percentage: 10.6 },
          { emotion: '担忧质疑', percentage: 6.3  },
          { emotion: '不满抱怨', percentage: 2.4  },
          { emotion: '愤怒反对', percentage: 2.0  },
          { emotion: '感恩情绪', percentage: 0.8  }
        ]
      },
      { time: '2022年谈判后', data: [
          { emotion: '中性表达', percentage: 53.7 },
          { emotion: '理性认可', percentage: 20.6 },
          { emotion: '担忧质疑', percentage: 12.7 },
          { emotion: '积极支持', percentage: 9.1  },
          { emotion: '感恩情绪', percentage: 1.9  },
          { emotion: '不满抱怨', percentage: 1.2  },
          { emotion: '愤怒反对', percentage: 0.8  }
        ]
      },
      { time: '2023年谈判前', data: [
          { emotion: '中性表达', percentage: 45.8 },
          { emotion: '理性认可', percentage: 31.5 },
          { emotion: '积极支持', percentage: 10.2 },
          { emotion: '担忧质疑', percentage: 9.7  },
          { emotion: '愤怒反对', percentage: 1.9  },
          { emotion: '感恩情绪', percentage: 0.5  },
          { emotion: '不满抱怨', percentage: 0.4  }
        ]
      },
      { time: '2023年谈判期间', data: [
          { emotion: '中性表达', percentage: 81.0 },
          { emotion: '理性认可', percentage: 7.4  },
          { emotion: '积极支持', percentage: 7.1  },
          { emotion: '担忧质疑', percentage: 4.0  },
          { emotion: '感恩情绪', percentage: 0.3  },
          { emotion: '愤怒反对', percentage: 0.3  },
          { emotion: '不满抱怨', percentage: 0.0  }
        ]
      },
      { time: '2023年谈判后', data: [
          { emotion: '中性表达', percentage: 53.5 },
          { emotion: '理性认可', percentage: 26.1 },
          { emotion: '担忧质疑', percentage: 9.7  },
          { emotion: '积极支持', percentage: 8.7  },
          { emotion: '不满抱怨', percentage: 1.1  },
          { emotion: '愤怒反对', percentage: 0.5  },
          { emotion: '感恩情绪', percentage: 0.4  }
        ]
      },
      { time: '2024年谈判前', data: [
          { emotion: '中性表达', percentage: 42.3 },
          { emotion: '理性认可', percentage: 29.2 },
          { emotion: '积极支持', percentage: 12.7 },
          { emotion: '担忧质疑', percentage: 11.9 },
          { emotion: '感恩情绪', percentage: 2.3  },
          { emotion: '愤怒反对', percentage: 0.9  },
          { emotion: '不满抱怨', percentage: 0.7  }
        ]
      },
      { time: '2024年谈判期间', data: [
          { emotion: '中性表达', percentage: 61.7 },
          { emotion: '积极支持', percentage: 21.1 },
          { emotion: '理性认可', percentage: 8.0  },
          { emotion: '担忧质疑', percentage: 6.6  },
          { emotion: '感恩情绪', percentage: 1.9  },
          { emotion: '愤怒反对', percentage: 0.5  },
          { emotion: '不满抱怨', percentage: 0.2  }
        ]
      },
      { time: '2024年谈判后', data: [
          { emotion: '中性表达', percentage: 47.1 },
          { emotion: '积极支持', percentage: 26.9 },
          { emotion: '理性认可', percentage: 15.6 },
          { emotion: '担忧质疑', percentage: 8.6  },
          { emotion: '不满抱怨', percentage: 0.9  },
          { emotion: '感恩情绪', percentage: 0.7  },
          { emotion: '愤怒反对', percentage: 0.1  }
        ]
      }
    ];

    const option = {
      backgroundColor: 'transparent',
      title: {
        text: '医保谈判微博舆情动态（2018-2024）',
        subtext: '各时期情感态度分布（%）',
        left: 'center', 
        top: 20,
        textStyle: { 
          fontSize: 24, 
          fontWeight: 'bold',
          color: '#333'
        },
        subtextStyle: { 
          fontSize: 16, 
          color: '#666' 
        }
      },
      grid: { 
        top: 120, 
        bottom: 100, 
        left: 150, 
        right: 120,
        containLabel: true
      },
      xAxis: {
        type: 'value',
        max: 'dataMax',
        axisLabel: { 
          formatter: '{value}%', 
          fontSize: 12 
        },
        splitLine: { 
          show: true, 
          lineStyle: { 
            type: 'dashed', 
            color: '#e0e0e0' 
          } 
        }
      },
      yAxis: {
        type: 'category',
        inverse: true,
        data: Object.keys(emotionColors), // 初始设置所有分类
        axisLabel: { 
          fontSize: 14,
          color: '#333'
        },
        axisTick: {
          show: false
        }
      },
      series: [{
        name: '情感分布',
        type: 'bar',
        realtimeSort: true,
        sortSeriesIndex: 0,
        data: [],
        label: {
          show: true,
          position: 'right',
          formatter: '{c}%',
          fontSize: 12,
          fontWeight: 'bold',
          color: '#333'
        },
        itemStyle: {
          borderRadius: [0, 4, 4, 0]
        },
        emphasis: { 
          focus: 'series' 
        },
        animationDuration: 1000,
        animationDurationUpdate: 1000,
        animationEasing: 'cubicInOut',
        animationEasingUpdate: 'cubicInOut'
      }],
      legend: {
        show: true,
        bottom: 20,
        data: Object.keys(emotionColors),
        textStyle: { 
          fontSize: 12 
        },
        itemWidth: 25,
        itemHeight: 14,
        formatter: function(name) {
          return name;
        }
      },
      graphic: {
   elements: [{
     id: 'timeLabel',
     type: 'text',
     right: 80,
     bottom: 120,
     style: {
       text: '',
       fill: 'rgba(100,100,100,0.25)',
       fontSize:   100,        // 直接指定字号
       fontWeight: 'bold',     // 粗体
       fontFamily: 'Arial',    // 字体
       textAlign:  'right'
     },
     z: 100
   }]
 },
      animationDuration: 0,
      animationDurationUpdate: 1000,
      animationEasing: 'linear',
      animationEasingUpdate: 'linear'
    };

    // 设置初始配置
    myChart.setOption(option);
    console.log('初始配置设置完成');

    let currentIndex = 0;
    
    function updateData() {
      const frame = timelineData[currentIndex];
      console.log(`更新数据: ${frame.time}`);
      
      // 准备数据，确保包含所有类别
      const dataMap = {};
      frame.data.forEach(item => {
        dataMap[item.emotion] = item.percentage;
      });
      
      // 为所有情感类别生成数据
      const completeData = Object.keys(emotionColors).map(emotion => ({
        name: emotion,
        value: dataMap[emotion] || 0,
        itemStyle: {
          color: emotionColors[emotion]
        }
      }));

      // 更新图表
      myChart.setOption({
        yAxis: {
          data: Object.keys(emotionColors) // 确保y轴显示所有类别
        },
        series: [{
          data: completeData
        }],
        graphic: {
          elements: [{
            id: 'timeLabel',
            style: {
              text: frame.time
            }
          }]
        }
      });

      currentIndex = (currentIndex + 1) % timelineData.length;
    }

    // 立即显示第一帧
    setTimeout(() => {
      updateData();
    }, 100);
    
    // 设置定时更新
    let playInterval = setInterval(updateData, updateFrequency);

    // 点击暂停/继续
    let playing = true;
    myChart.on('click', function(params) {
      // 只在点击图表区域时暂停
      if (params.componentType === 'series') {
        if (playing) {
          clearInterval(playInterval);
          console.log('动画已暂停');
        } else {
          playInterval = setInterval(updateData, updateFrequency);
          console.log('动画已继续');
        }
        playing = !playing;
      }
    });

    // 响应式调整
    window.addEventListener('resize', () => {
      myChart.resize();
    });
    
    // 确保图表在可见时重新渲染
    const resizeObserver = new ResizeObserver(entries => {
      for (let entry of entries) {
        if (entry.target === chartDom) {
          myChart.resize();
        }
      }
    });
    resizeObserver.observe(chartDom);
    
    console.log('图表初始化完成');
}

// 添加调试函数
function debugChart() {
    const chartDom = document.getElementById('main');
    console.log('=== 图表调试信息 ===');
    console.log('图表容器:', chartDom);
    console.log('容器尺寸:', chartDom ? `${chartDom.offsetWidth}x${chartDom.offsetHeight}` : '未找到');
    console.log('ECharts版本:', typeof echarts !== 'undefined' ? echarts.version : '未加载');
    
    // 检查容器的CSS
    if (chartDom) {
        const styles = window.getComputedStyle(chartDom);
        console.log('容器样式:');
        console.log('- display:', styles.display);
        console.log('- width:', styles.width);
        console.log('- height:', styles.height);
        console.log('- visibility:', styles.visibility);
    }
}

// 确保在合适的时机初始化
document.addEventListener('DOMContentLoaded', function() {
    // 添加调试
    debugChart();
    initChart();

});




  // ——— 完整“代码1”逻辑 ———
    // 原始数据
    const rawData = [
    ["医保", "谈判", 17311], ["医保", "收起", 12262], ["医保", "药品", 12105],
            ["医保", "国家", 12096], ["收起", "谈判", 12088], ["药品", "谈判", 12041],
            ["国家", "谈判", 12007], ["国家", "药品", 9889], ["国家", "收起", 9618],
            ["医保", "目录", 9615], ["目录", "谈判", 9573], ["收起", "药品", 9377],
            ["目录", "药品", 8581], ["国家", "目录", 8340], ["收起", "目录", 7631],
            ["医保", "纳入", 6485], ["纳入", "谈判", 6439], ["价格", "医保", 5895],
            ["价格", "谈判", 5866], ["纳入", "药品", 5460], ["国家", "纳入", 5263],
            ["价格", "收起", 5230], ["收起", "纳入", 5162], ["目录", "纳入", 4915],
            ["价格", "国家", 4853], ["价格", "药品", 4748], ["医保", "微博", 4514],
            ["医保", "视频", 4511], ["微博", "谈判", 4423], ["视频", "谈判", 4422],
            ["医保", "降价", 4343], ["谈判", "降价", 4326], ["医保", "患者", 4316],
            ["患者", "谈判", 4293], ["微博", "视频", 4190], ["准入", "医保", 4183],
            ["准入", "谈判", 4179], ["价格", "目录", 4157], ["微博", "收起", 3940],
            ["收起", "视频", 3902], ["患者", "收起", 3763], ["医保", "通过", 3758],
            ["谈判", "通过", 3739], ["国家", "患者", 3727], ["医保", "调整", 3660],
            ["医保", "治疗", 3632], ["调整", "谈判", 3630], ["药品", "视频", 3622],
            ["微博", "药品", 3594], ["企业", "医保", 3588], ["患者", "药品", 3550],
            ["企业", "谈判", 3536], ["医保", "用药", 3529], ["治疗", "谈判", 3528],
            ["用药", "谈判", 3517], ["国家", "视频", 3466], ["国家", "微博", 3444],
            ["收起", "降价", 3440], ["收起", "治疗", 3433], ["收起", "通过", 3425],
            ["医保", "抗癌药", 3420], ["抗癌药", "谈判", 3394], ["国家", "降价", 3388],
            ["国家", "调整", 3360], ["准入", "药品", 3355], ["准入", "国家", 3331],
            ["收起", "调整", 3324], ["药品", "降价", 3313], ["医保", "进入", 3305],
            ["药品", "调整", 3290], ["医保", "范围", 3274], ["范围", "谈判", 3261],
            ["医保", "新闻", 3240], ["谈判", "进入", 3207], ["收起", "用药", 3196],
            ["国家", "通过", 3175], ["目录", "调整", 3158], ["患者", "目录", 3155],
            ["用药", "药品", 3155], ["新闻", "谈判", 3148], ["企业", "收起", 3124],
            ["药品", "通过", 3123], ["目录", "视频", 3114], ["国家", "用药", 3109],
            ["医保", "医疗", 3107], ["治疗", "药品", 3094], ["微博", "目录", 3093],
            ["医疗", "谈判", 3084], ["其中", "医保", 3076], ["国家", "治疗", 3060],
            ["其中", "谈判", 3058], ["医保", "进行", 3003], ["收起", "进入", 2979],
            ["谈判", "进行", 2973], ["国家", "抗癌药", 2943], ["公布", "医保", 2919],
            ["其中", "收起", 2917], ["公布", "谈判", 2903], ["医保", "支付", 2902],
            ["今年", "医保", 2892], ["医保", "基本", 2890], ["支付", "谈判", 2882],
            ["用药", "目录", 2876], ["今年", "谈判", 2869], ["基本", "谈判", 2864],
            ["范围", "药品", 2810], ["收起", "新闻", 2798], ["专家", "医保", 2798],
            ["医保", "平均", 2796], ["纳入", "范围", 2794], ["平均", "谈判", 2787],
            ["目录", "通过", 2774], ["收起", "进行", 2761], ["企业", "国家", 2760],
            ["其中", "药品", 2750], ["医疗", "收起", 2743], ["医保", "结果", 2716],
            ["医保", "工作", 2707], ["专家", "谈判", 2706], ["结果", "谈判", 2699],
            ["其中", "国家", 2691], ["工作", "谈判", 2685], ["医保", "发布", 2685],
            ["目录", "降价", 2679], ["发布", "谈判", 2660], ["平均", "药品", 2650],
            ["支付", "收起", 2650], ["国家", "进入", 2645], ["医保", "罕见", 2636],
            ["罕见", "谈判", 2629], ["公布", "药品", 2618], ["药品", "进入", 2605],
            ["中国", "医保", 2595], ["准入", "收起", 2592], ["今年", "收起", 2590],
            ["目录", "进入", 2582], ["国家", "范围", 2578], ["医疗", "国家", 2573],
            ["医保", "实施", 2573], ["支付", "药品", 2570], ["医保", "成功", 2566],
            ["基本", "收起", 2557], ["成功", "谈判", 2557], ["实施", "谈判", 2554],
            ["收起", "范围", 2539], ["医保", "新增", 2533], ["新增", "谈判", 2525],
            ["公布", "国家", 2523], ["医保", "新版", 2523], ["企业", "药品", 2521]
    ];

    // 构建节点 & 链接
    const nodeMap = new Map(), links=[];
rawData.forEach(([s,t,v])=>{
  if(!nodeMap.has(s)) nodeMap.set(s,{id:s,weight:0,connections:new Set()});
  if(!nodeMap.has(t)) nodeMap.set(t,{id:t,weight:0,connections:new Set()});
  nodeMap.get(s).weight+=v; nodeMap.get(t).weight+=v;
  nodeMap.get(s).connections.add(t); nodeMap.get(t).connections.add(s);
  links.push({source:s,target:t,value:v});
});
const nodes=[...nodeMap.values()].sort((a,b)=>b.weight-a.weight);

/* ——————————— 分类 & 颜色 ——————————— */
function getCategory(id){
  const cats={
    "政策核心":["医保","谈判","国家","政策","基本"],
    "药品医疗":["药品","用药","抗癌药","罕见","医药"],
    "经济价格":["价格","降价","支付","费用","成本"],
    "患者群体":["患者","群体","病人","需求","民众"],
    "医药企业":["企业","公司","厂家","生产","研发"],
    "医疗机构":["医疗","医院","机构","卫生","治疗"],
    "正面情绪":["成功","新增","通过","纳入","进入"],
    "负面情绪":["失败","退出","困难","问题","挑战"],
    "中性分析":["目录","调整","范围","收起","其中","发布","公布","结果","工作","进行","实施"],
    "地区相关":["中国","地方","省市","区域","全国"]
  };
  for(const k in cats) if(cats[k].some(w=>id.includes(w))) return k;
  if(["微博","视频","新闻","今年","专家","新版","平均"].includes(id)) return "中性分析";
  return "中性分析";
}
const colorMap={
  "政策核心":"#3b82f6","药品医疗":"#f59e0b","经济价格":"#10b981",
  "患者群体":"#ec4899","医药企业":"#8b5cf6","医疗机构":"#f97316",
  "正面情绪":"#06b6d4","负面情绪":"#ef4444","中性分析":"#6b7280","地区相关":"#84cc16"
};
nodes.forEach(n=>{n.category=getCategory(n.id); n.color=colorMap[n.category];});

/* ——————————— SVG 基础 ——————————— */
const width=1200,height=800, cx=width/2, cy=height/2, R=Math.min(width,height)*.35;
const svg=d3.select("#networkVisualization").append("svg").attr("viewBox",[0,0,width,height]);
const g=svg.append("g");
svg.call(d3.zoom().scaleExtent([.5,3]).on("zoom",e=>g.attr("transform",e.transform)));
const tooltip=d3.select(".network-tooltip");

/* ——————————— 初始圆形布局 ——————————— */
function circularLayout(){
  const step=2*Math.PI/nodes.length;
  nodes.forEach((d,i)=>{
    const a=i*step-Math.PI/2;
    d.x=cx+R*Math.cos(a); d.y=cy+R*Math.sin(a); d.angle=a;
  });
}
circularLayout();

/* ——————————— 绘制边 —— */
const link=g.append("g").selectAll("path").data(links).enter().append("path")
  .attr("class","link")
  .attr("stroke",d=>colorMap[getCategory(d.source)])
  .attr("stroke-width",d=>Math.sqrt(d.value)/50)
  .attr("d",d=>{const S=nodeMap.get(d.source),T=nodeMap.get(d.target);
    const dx=T.x-S.x,dy=T.y-S.y,dr=Math.hypot(dx,dy)/2;
    return`M${S.x},${S.y}A${dr},${dr} 0 0,1 ${T.x},${T.y}`});

/* ——————————— 绘制节点 —— */
const node=g.append("g").selectAll("g").data(nodes).enter().append("g")
  .attr("class","node").attr("transform",d=>`translate(${d.x},${d.y})`);

node.append("circle").attr("r",d=>Math.sqrt(d.weight)/60+5).attr("fill",d=>d.color);
node.append("text")
  .text(d=>d.id)
  .attr("x",d=>(Math.sqrt(d.weight)/60+15)*Math.cos(d.angle))
  .attr("y",d=>(Math.sqrt(d.weight)/60+15)*Math.sin(d.angle))
  .style("font-size",d=>Math.min(Math.sqrt(d.weight)/70+10,14)+"px")
  .attr("transform",d=>{
    const deg=d.angle*180/Math.PI+90,
          x=(Math.sqrt(d.weight)/60+15)*Math.cos(d.angle),
          y=(Math.sqrt(d.weight)/60+15)*Math.sin(d.angle);
    return deg>90&&deg<270?`rotate(${deg+180},${x},${y})`:`rotate(${deg},${x},${y})`;
  });

/* ——————————— 交互（高亮 & Tooltip） —— */
node.on("mouseenter",(e,d)=>{
  link.classed("fade",l=>l.source!==d.id&&l.target!==d.id)
      .classed("highlight",l=>l.source===d.id||l.target===d.id);
  node.classed("fade",n=>!d.connections.has(n.id)&&n.id!==d.id);
  const total=links.filter(l=>l.source===d.id||l.target===d.id)
                   .reduce((s,l)=>s+l.value,0);
  tooltip.style("opacity",1)
    .html(`<strong>${d.id}</strong><br>类别:${d.category}<br>权重:${d.weight.toLocaleString()}<br>连接数:${d.connections.size}`)
    .style("left",e.pageX+10+"px").style("top",e.pageY-10+"px");
}).on("mouseleave",()=>{
  link.classed("fade",false).classed("highlight",false);
  node.classed("fade",false); tooltip.style("opacity",0);
});

/* ——————————— 布局切换 —— */
let simulation=null,currentLayout="circular";
function updatePositions(dur){
  node.transition().duration(dur).attr("transform",d=>`translate(${d.x},${d.y})`);
  link.transition().duration(dur).attr("d",d=>{
    const S=nodeMap.get(d.source.id||d.source),T=nodeMap.get(d.target.id||d.target);
    if(currentLayout==="circular"){
      const dx=T.x-S.x,dy=T.y-S.y,dr=Math.hypot(dx,dy)/2;
      return`M${S.x},${S.y}A${dr},${dr} 0 0,1 ${T.x},${T.y}`;
    }else{
      return`M${S.x},${S.y}L${T.x},${T.y}`;
    }
  });
}

function changeNetworkLayout(layout){
  currentLayout=layout;
  if(simulation) simulation.stop();
  if(layout==="circular"){
    circularLayout(); updatePositions(800);
  }else if(layout==="force"){
    simulation=d3.forceSimulation(nodes)
      .force("link",d3.forceLink(links).id(d=>d.id).distance(100))
      .force("charge",d3.forceManyBody().strength(-300))
      .force("center",d3.forceCenter(cx,cy))
      .force("collision",d3.forceCollide().radius(d=>Math.sqrt(d.weight)/60+20))
      .on("tick",()=>updatePositions(0));
  }else if(layout==="radial"){
    /* 仅改变标签位置，不改节点坐标 */
    node.selectAll("text").transition().duration(500)
      .attr("x",0).attr("y",d=>Math.sqrt(d.weight)/60+15)
      .attr("transform","");
  }
}

/* ——————————— 重置视图 —— */
function resetNetworkView(){
  svg.transition().duration(750).call(d3.zoom().transform,d3.zoomIdentity);
}

/* —— 暴露到全局（与按钮回调对应） —— */
window.changeNetworkLayout=changeNetworkLayout;
window.resetNetworkView =resetNetworkView;


(function(){
  const box = document.getElementById('chatBgBubbles');
  if(!box) return;
  const N = 8;
  for(let i=0;i<N;i++){
    const d = document.createElement('div');
    d.className = 'bg-bubble';
    const size  = 20 + Math.random()*60;
    d.style.width = d.style.height = size + 'px';
    d.style.left  = Math.random()*100 + '%';
    d.style.animationDelay = Math.random()*18 + 's';
    box.appendChild(d);
  }
})();

/* -------- 点击轻微回弹 -------- */
document.querySelectorAll('#chatSentiment .chat-bubble')
        .forEach(b=>b.addEventListener('click',()=>{
            b.style.transform='scale(.96)';
            setTimeout(()=>b.style.transform='',160);
        }));

/* -------- 把新元素挂进 scrollObserver -------- */
(function(){
  const targets = document.querySelectorAll('#chatSentiment [data-scroll]');
  if(window.scrollObserver){                // 页面已存在全局 observer
      targets.forEach(el=>scrollObserver.observe(el));
  }else{                                    // 页面没有 → 自建同配置 observer
      const localObserver = new IntersectionObserver((ents)=>{
          ents.forEach(en=>{
              if(en.isIntersecting) en.target.classList.add('show');
          });
      },{threshold:0.3,rootMargin:'0px 0px -100px 0px'});
      targets.forEach(el=>localObserver.observe(el));
  }
})();


       // 2. 用 IntersectionObserver 监测 page6，滑到时才调用 renderChart()
       const observer = new IntersectionObserver((entries, obs) => {
            entries.forEach(ent => {
                if (ent.isIntersecting) {
                    // 延迟3秒后执行图表动画
                    setTimeout(() => {
                        renderChart();
                    }, 0); // 3000毫秒 = 3秒
                    obs.disconnect(); // 只执行一次
                }
            });
        }, { threshold: 0.9});

        observer.observe(document.getElementById('chart'));
            </script>
        <!-- ========= Page-9 专属脚本（已 IIFE 隔离） ========= -->
<!-- ========= Page-9 独享脚本 ========= -->
<script>
    ;(function () {
      'use strict';
    
      /* ---------- 0. 安全兜底 ---------- */
      const page9 = document.getElementById('page9');
      if (!page9) return;                 // 没有第 9 页就什么也不做
    
      /* ---------- 1. 小工具 ---------- */
      const $  = (sel, ctx = page9) => ctx.querySelector(sel);
      const $$ = (sel, ctx = page9) => Array.from(ctx.querySelectorAll(sel));
    
      /* ---------- 2. 进场动画（一次性） ---------- */
      let played = false;
      function playEntrance () {
        if (played) return;
        const rect = page9.getBoundingClientRect();
        if (rect.top > window.innerHeight * 0.8) return;
    
        // 标题 & 引导文字
        $$('.fade-in-element').forEach((el, i) =>
          setTimeout(() => el.classList.add('show'), i * 300)
        );
    
        // 卡片
        $$('.medicine-card').forEach((card, i) =>
          setTimeout(() => card.classList.add('show'), 800 + i * 100)
        );
    
        // 结语
        setTimeout(() => $('.conclusion-section')?.classList.add('show'), 2000);
    
        played = true;
        window.removeEventListener('scroll', playEntrance);
      }
      window.addEventListener('scroll', playEntrance);
      playEntrance();                     // 刷新时若已在视口内立即触发
    
      /* ---------- 3. 懒加载兜底（交叉观察） ---------- */
      const io = new IntersectionObserver(
        es => es.forEach(e => {
          if (e.isIntersecting) {
            e.target.classList.add('show');
            io.unobserve(e.target);
          }
        }),
        { threshold: 0.12 }
      );
      $$('.fade-in-element, .medicine-card').forEach(el => io.observe(el));
    
      /* ---------- 4. 卡片交互 ---------- */
      const cards = $$('.medicine-card');
      const clearPulse = () => cards.forEach(c => c.classList.remove('pulse-effect'));
    
      cards.forEach((card, idx) => {
        // 点击：聚焦 + 呼吸
        card.addEventListener('click', () => {
          clearPulse();
          card.classList.add('pulse-effect');
          card.scrollIntoView({ behavior: 'smooth', block: 'center' });
        });
    
        // 悬停：紧急度小圆点放大
        card.addEventListener('mouseenter', () => {
          card.querySelectorAll('.urgency-dot').forEach((d, i) => {
            setTimeout(() => {
              d.style.animation = 'pulse 0.5s ease';
              d.style.transform = 'scale(1.3)';
            }, i * 100);
          });
        });
        card.addEventListener('mouseleave', () => {
          card.querySelectorAll('.urgency-dot').forEach(d => {
            d.style.animation = '';
            d.style.transform  = 'scale(1)';
          });
        });
      });
    
      /* ---------- 5. 键盘 & 触摸支持 ---------- */
      document.addEventListener('keydown', e => {
        if (e.key === 'Escape') return clearPulse();
    
        let idx = null;
        if (/^[1-9]$/.test(e.key)) idx = +e.key - 1;
        else if (e.key === '0')    idx = 9;      // 第 10 张
    
        if (idx != null && cards[idx]) {
          cards[idx].click();
          e.preventDefault();
        }
      });
    
      if ('ontouchstart' in window) {
        cards.forEach(card => {
          let x0 = 0, y0 = 0, t0 = 0;
          card.addEventListener('touchstart', e => {
            t0 = Date.now();
            x0 = e.touches[0].clientX;
            y0 = e.touches[0].clientY;
          });
          card.addEventListener('touchend',   e => {
            const dt = Date.now() - t0;
            const dx = e.changedTouches[0].clientX - x0;
            const dy = e.changedTouches[0].clientY - y0;
            if (dt < 500 && Math.hypot(dx, dy) < 12) card.click();  // 轻触视为点击
          });
        });
      }
    
    })();
    </script>
    <script>
        // 背景音乐自动播放脚本
        (function() {
            'use strict';
            
            const backgroundMusic = document.getElementById('backgroundMusic');
            
            if (!backgroundMusic) {
                console.warn('背景音乐元素未找到');
                return;
            }
            
            // 设置音量（0.0 到 1.0，建议设置较低避免干扰阅读）
            backgroundMusic.volume = 0.3;
            
            // 尝试自动播放
            function attemptAutoplay() {
                const playPromise = backgroundMusic.play();
                
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        console.log('背景音乐开始播放');
                    }).catch(error => {
                        console.log('自动播放被阻止，等待用户交互:', error);
                        // 如果自动播放被阻止，在用户首次交互时播放
                        document.addEventListener('click', startMusicOnInteraction, { once: true });
                        document.addEventListener('scroll', startMusicOnInteraction, { once: true });
                        document.addEventListener('keydown', startMusicOnInteraction, { once: true });
                    });
                }
            }
            
            // 用户交互后播放音乐
            function startMusicOnInteraction() {
                backgroundMusic.play().then(() => {
                    console.log('用户交互后背景音乐开始播放');
                }).catch(error => {
                    console.error('音乐播放失败:', error);
                });
            }
            
            // 页面加载完成后尝试播放
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', attemptAutoplay);
            } else {
                attemptAutoplay();
            }
            
            // 音频事件监听（用于调试）
            backgroundMusic.addEventListener('loadstart', () => console.log('开始加载音频'));
            backgroundMusic.addEventListener('canplaythrough', () => console.log('音频可以播放'));
            backgroundMusic.addEventListener('play', () => console.log('音频开始播放'));
            backgroundMusic.addEventListener('pause', () => console.log('音频暂停'));
            backgroundMusic.addEventListener('error', (e) => {
                console.error('音频加载错误:', e);
            });
            
        })();
        </script>
   <!-- === Page-10 专属脚本（隔离版）==================================== -->
<script>
    ;(function () {
      'use strict';
    
      /* ---------- 1. 分类关键词 ---------- */
      const p10_categories = {
        heart: {
          name: '心血管',
          class: 'category-heart',
          keywords: [
            '阿司匹林','美托洛尔','氯沙坦','缬沙坦',
            '阿托伐他汀','瑞舒伐他汀','硝苯地平','比索洛尔'
          ]
        },
        cancer: {
          name: '抗癌',
          class: 'category-cancer',
          keywords: [
            '替尼','单抗','曲妥珠单抗','贝伐珠单抗',
            '伊马替尼','吉非替尼','奥希替尼','帕博利珠单抗'
          ]
        },
        diabetes: {
          name: '糖尿病',
          class: 'category-diabetes',
          keywords: [
            '胰岛素','格列','二甲双胍',
            '利格列汀','西格列汀','达格列净','恩格列净'
          ]
        },
        pain:   {
          name: '疼痛',
          class: 'category-pain',
          keywords: ['布洛芬','对乙酰','双氯芬酸','塞来昔布','吗啡','芬太尼','曲马多']
        },
        mental: {
          name: '精神科',
          class: 'category-mental',
          keywords: ['舍曲林','帕罗西汀','文拉法辛','奥氮平','利培酮','阿立哌唑','喹硫平']
        },
        rare:   {
          name: '罕见病',
          class: 'category-rare',
          keywords: ['诺西那生钠','依达拉奉','利鲁唑','阿加糖酶','美金刚']
        }
      };
    
      /* ---------- 2. 本地状态 ---------- */
      const LS_MSG   = 'p10_medicalMessages';
      const LS_FEED  = 'p10_userCategoryFeedback';
    
      let p10_messages  = JSON.parse(localStorage.getItem(LS_MSG)  || '[]');
      let p10_feedback  = JSON.parse(localStorage.getItem(LS_FEED) || '{}');
    
      /* 若第一次加载——塞入 5 条示例数据 */
      if (!p10_messages.length) {
        p10_messages = [
          {
            id: 1,
            medicineName: '奥希替尼',
            userName: '小雨的妈妈',
            userLocation: '上海',
            urgencyLevel: 'urgent',
            userStory: '女儿确诊肺癌 EGFR 突变，一线治疗后出现耐药。希望能早日纳入医保，给更多家庭带来希望。',
            category: 'cancer',
            timestamp: '2024-12-15 14:30',
            hopeLevel: 5
          },
          {
            id: 2,
            medicineName: '诺西那生钠',
            userName: '坚强的爸爸',
            userLocation: '北京',
            urgencyLevel: 'urgent',
            userStory: '儿子患有 SMA，这个药是唯一的希望。一针 70 万，希望谈判成功！',
            category: 'rare',
            timestamp: '2024-12-14 09:15',
            hopeLevel: 5
          },
          {
            id: 3,
            medicineName: '德谷胰岛素',
            userName: '糖友小王',
            userLocation: '深圳',
            urgencyLevel: 'moderate',
            userStory: '用了很多胰岛素，德谷控糖最稳，希望纳入医保减轻负担。',
            category: 'diabetes',
            timestamp: '2024-12-13 16:45',
            hopeLevel: 4
          },
          {
            id: 4,
            medicineName: '帕博利珠单抗',
            userName: '抗癌战士',
            userLocation: '广州',
            urgencyLevel: 'urgent',
            userStory: '黑色素瘤 PD-1 给了我新希望，但价格太高，盼医保！',
            category: 'cancer',
            timestamp: '2024-12-12 11:20',
            hopeLevel: 5
          },
          {
            id: 5,
            medicineName: '利鲁唑',
            userName: '渐冻人家属',
            userLocation: '成都',
            urgencyLevel: 'urgent',
            userStory: '丈夫 ALS，两年多了，利鲁唑就是延续希望的药。',
            category: 'rare',
            timestamp: '2024-12-11 20:10',
            hopeLevel: 4
          }
        ];
        localStorage.setItem(LS_MSG, JSON.stringify(p10_messages));
      }
    
      /* ---------- 3. DOM 缓存 ---------- */
      const $ = (id) => document.getElementById(id);
    
      const elForm     = $('p10_messageForm');
      const elList     = $('p10_messagesContainer');
      const elCounter  = $('p10_messageCount');
      const elTabs     = document.querySelectorAll('#page10 .filter-tab');
    
      let   currentTab = 'all';
    
      /* ---------- 4. 算法工具 ---------- */
      function esc(txt) {
        const dv = document.createElement('div'); dv.textContent = txt; return dv.innerHTML;
      }
    
      function detectCat(name) {
        if (p10_feedback[name]) return p10_feedback[name];
    
        for (const [k, cfg] of Object.entries(p10_categories)) {
          if (cfg.keywords.some(kw => name.includes(kw))) return k;
        }
        if (name.includes('替尼') || name.includes('单抗'))   return 'cancer';
        if (name.includes('胰岛素') || name.includes('格列')) return 'diabetes';
        if (name.includes('洛尔') || name.includes('沙坦'))   return 'heart';
        return 'other';
      }
    
      function hopeLevel(urg, cat) {
        if (urg==='urgent')   return 5;
        if (urg==='moderate') return 4;
        if (urg==='mild')     return 3;
        return (cat==='cancer'||cat==='rare') ? 4 : 3;
      }
    
      const urgencyText = { urgent:'非常紧急', moderate:'比较紧急', mild:'一般紧急' };
      const catColor = {
        heart:'#e74c3c', cancer:'#9b59b6', diabetes:'#3498db',
        pain:'#2ecc71', mental:'#f39c12', rare:'#e67e22', other:'#95a5a6'
      };
    
      /* ---------- 5. 渲染函数 ---------- */
      function render() {
        const data = (currentTab==='all')
          ? p10_messages
          : p10_messages.filter(m=>m.category===currentTab);
    
        if (!data.length) {
          elList.innerHTML = `<div class="empty-state">
             <div class="empty-state-icon">🔍</div>
             <p>${currentTab==='all'?'还没有留言，成为第一个分享希望的人':'暂无此类别的留言'}</p>
           </div>`;
          elCounter.textContent = p10_messages.length;
          return;
        }
    
        elList.innerHTML = data.map((m,i)=>{
          const cfg = p10_categories[m.category] || {name:'其他',class:'category-other'};
          const hearts = Array.from({length:5},(_,k)=>`<span class="hope-heart ${k<m.hopeLevel?'filled':''}">♥</span>`).join('');
          return `
          <div class="message-card" style="animation-delay:${i*0.1}s;border-left-color:${catColor[m.category]||catColor.other}">
            <div class="message-header">
              <div>
                <div class="medicine-name">${esc(m.medicineName)}</div>
                <div class="medicine-category ${cfg.class}"
                     onclick="p10_showCatMenu(this,'${esc(m.medicineName)}','${m.category}')">
                  ${cfg.name}
                  <div class="category-options">
                    ${Object.entries(p10_categories).map(([k,v])=>`<div class="category-option" data-cat="${k}">${v.name}</div>`).join('')}
                    <div class="category-option" data-cat="other">其他</div>
                  </div>
                </div>
              </div>
              <div class="hope-meter"><div class="hope-hearts">${hearts}</div></div>
            </div>
    
            <div class="message-content">
              <div class="message-detail"><strong>分享者：</strong>${esc(m.userName)}</div>
              ${m.userLocation?`<div class="message-detail"><strong>地区：</strong>${esc(m.userLocation)}</div>`:''}
              ${m.urgencyLevel?`<div class="message-detail"><strong>紧急程度：</strong>${urgencyText[m.urgencyLevel]}</div>`:''}
              ${m.userStory?`<div class="message-story">${esc(m.userStory)}</div>`:''}
            </div>
    
            <div class="message-footer"><div class="message-time">${m.timestamp}</div></div>
          </div>`;
        }).join('');
    
        elCounter.textContent = p10_messages.length;
      }
    
      /* ---------- 6. 分类纠正菜单 ---------- */
      window.p10_showCatMenu = function(el, medName, curCat) {
        /* 先关掉别的 */
        document.querySelectorAll('#page10 .category-options').forEach(d=>{
          if (d!==el.querySelector('.category-options')) d.style.display='none';
        });
    
        const opts = el.querySelector('.category-options');
        opts.style.display = opts.style.display==='block' ? 'none' : 'block';
    
        opts.querySelectorAll('.category-option').forEach(op=>{
          op.onclick = (e)=>{
            e.stopPropagation();
            const newCat = op.dataset.cat;
            if (newCat!==curCat) {
              /* 更新反馈 & 消息 */
              p10_feedback[medName] = newCat;
              localStorage.setItem(LS_FEED, JSON.stringify(p10_feedback));
              p10_messages.forEach(msg=>{ if(msg.medicineName===medName) msg.category=newCat; });
              localStorage.setItem(LS_MSG, JSON.stringify(p10_messages));
              render();
              notify('感谢反馈，分类已更新','success');
            }
            opts.style.display='none';
          };
        });
      };
    
      /* ---------- 7. 过滤标签事件 ---------- */
      elTabs.forEach(tab=>{
        tab.addEventListener('click', ()=>{
          elTabs.forEach(t=>t.classList.remove('active'));
          tab.classList.add('active');
          currentTab = tab.dataset.filter;
          render();
        });
      });
    
      /* ---------- 8. 表单提交 ---------- */
      if (elForm) {
        elForm.addEventListener('submit', (e)=>{
          e.preventDefault();
          const name  = $('p10_medicineName').value.trim();
          const user  = $('p10_userName').value.trim() || '匿名用户';
          const loc   = $('p10_userLocation').value.trim();
          const urg   = $('p10_urgencyLevel').value;
          const story = $('p10_userStory').value.trim();
    
          if (!name)           { notify('请输入药品名称','error'); return; }
          if (name.length < 2) { notify('药品名称至少 2 个字符','error'); return; }
    
          const cat  = detectCat(name);
          const hope = hopeLevel(urg,cat);
    
          p10_messages.unshift({
            id:Date.now(), medicineName:name, userName:user, userLocation:loc,
            urgencyLevel:urg, userStory:story, category:cat,
            timestamp:new Date().toLocaleString('zh-CN',{year:'numeric',month:'2-digit',day:'2-digit',hour:'2-digit',minute:'2-digit'}),
            hopeLevel:hope
          });
          if (p10_messages.length>100) p10_messages = p10_messages.slice(0,100);
          localStorage.setItem(LS_MSG, JSON.stringify(p10_messages));
    
          render();
          elForm.reset();
          notify('您的声音已成功发出！感谢分享 ✨','success');
          document.querySelector('#page10 .messages-display').scrollIntoView({behavior:'smooth'});
        });
      }
    
      /* ---------- 9. 通知 ---------- */
      function notify(text, type='info') {
        const bg = {
          success:'linear-gradient(135deg,#2ecc71,#27ae60)',
          error:  'linear-gradient(135deg,#e74c3c,#c0392b)',
          info:   'linear-gradient(135deg,#3498db,#2980b9)'
        }[type]||'#000';
        const div = document.createElement('div');
        div.style.cssText = `
          position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);
          padding:18px 40px;border-radius:14px;color:#fff;font-size:1rem;font-weight:600;
          background:${bg};box-shadow:0 12px 30px rgba(0,0,0,.25);z-index:9999;
          transition:all .3s;opacity:0;`;
        div.textContent = text;
        document.body.appendChild(div);
        requestAnimationFrame(()=>div.style.opacity='1');
        setTimeout(()=>div.style.opacity='0',2800);
        setTimeout(()=>document.body.removeChild(div),3300);
      }
    
      /* ---------- 10. 初始化 ---------- */
      document.addEventListener('DOMContentLoaded', render);
    
      /* ---------- 11. 调试口 ---------- */
      window.p10_debug = ()=>({
        messages: p10_messages,
        feedback: p10_feedback,
        filter: currentTab
      });
    
    })();

    window.addEventListener('scroll', function() {
   const page11 = document.getElementById('page11');
   if (!page11) return;
   
   const page11Top = page11.offsetTop;
   const scrollTop = window.pageYOffset;
   const windowHeight = window.innerHeight;
   
   // 当滚动到第十一页时触发动画
   if (scrollTop > page11Top - windowHeight * 0.8) {
       const page11Elements = page11.querySelectorAll('.fade-in-element');
       page11Elements.forEach((element, index) => {
           setTimeout(() => {
               element.classList.add('show');
           }, index * 300);
       });
       
       // 只执行一次
       window.removeEventListener('scroll', arguments.callee);
   }
});

// 确保按钮点击事件正常工作
document.addEventListener('DOMContentLoaded', function() {
   const voiceButton = document.querySelector('.voice-button');
   if (voiceButton) {
       voiceButton.addEventListener('click', function() {
           // 添加点击反馈效果
           this.style.transform = 'translateY(-2px) scale(1.02)';
           setTimeout(() => {
               this.style.transform = '';
           }, 150);
       });
   }
});
    </script>
    <!-- === /Page-10 脚本结束 =========================================== -->
    
        
</body>
</html>